{"version":3,"sources":["mod-helpers.js"],"names":["$","MyAMS","helpers","clearValue","evt","target","currentTarget","data","val","clearDatetimeValue","picker","date","scrollTo","parent","anchor","props","exists","require","then","ajax","check","fn","env","baseURL","extext","setLoginHash","form","hash","window","location","setSEOStatus","input","progress","siblings","children","length","Math","min","status","removeClassPrefix","addClass","css","select2ChangeHelper","source","amsSelect2HelperTarget","amsSelect2HelperType","html","params","amsSelect2HelperArgument","get","amsSelect2HelperUrl","result","callback","core","getFunctionByName","amsSelect2HelperCallback","initContent","empty","catch","executeFunctionByName","refreshElement","options","Promise","resolve","reject","element","object_id","config","clearContent","document","replaceWith","content","refreshWidget","widget","widget_id","group","parents","addTableRow","selector","table_id","table","dtTable","DataTable","newRow","rows","add","draw","row_id","refreshTableRow","row","first","remove","refreshImage","image","image_id","attr","src","moveElementToParentEnd","detach","appendTo","addElementToParent","scrollParent","hideDropdown","closest","dropdown","bundle","modules","push","console","debug"],"mappings":"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","sourcesContent":["/* global MyAMS */\n/**\n * MyAMS generic helpers\n */\n\nconst $ = MyAMS.$;\n\n\nexport const helpers = {\n\n\t/**\n\t * Click handler used to clear input\n\t */\n\tclearValue: (evt) => {\n\t\tconst target = $(evt.currentTarget).data('target');\n\t\tif (target) {\n\t\t\t$(target).val(null);\n\t\t}\n\t},\n\n\t/**\n\t * Click handler used to clear datetime input\n\t */\n\tclearDatetimeValue: (evt) => {\n\t\tconst\n\t\t\ttarget = $(evt.currentTarget).data('target'),\n\t\t\tpicker = $(target).data('datetimepicker');\n\t\tif (picker) {\n\t\t\tpicker.date(null);\n\t\t}\n\t},\n\n\t/**\n\t * Scroll anchor parent element to given anchor\n\t *\n\t * @param anchor: scroll target\n\t * @param parent: scroll parent\n\t * @param props: scroll properties\n\t */\n\tscrollTo: (parent='#content', anchor, {...props}) => {\n\t\tif (typeof anchor === 'string') {\n\t\t\tanchor = $(anchor);\n\t\t}\n\t\tif (anchor.exists()) {\n\t\t\tMyAMS.require('ajax').then(() => {\n\t\t\t\tMyAMS.ajax.check($.fn.scrollTo,\n\t\t\t\t\t`${MyAMS.env.baseURL}../ext/jquery-scrollto${MyAMS.env.extext}.js`).then(() => {\n\t\t\t\t\t$(parent).scrollTo(anchor, props);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Store location hash when redirecting to log in form\n\t */\n\tsetLoginHash: () => {\n\t\tconst\n\t\t\tform = $('#login_form'),\n\t\t\thash = $(`input[name=\"login_form.widgets.hash\"]`, form);\n\t\thash.val(window.location.hash);\n\t},\n\n\t/**\n\t * SEO input helper\n\t */\n\tsetSEOStatus: (evt) => {\n\t\tconst\n\t\t\tinput = $(evt.target),\n\t\t\tprogress = input.siblings('.progress').children('.progress-bar'),\n\t\t\tlength = Math.min(input.val().length, 100);\n\t\tlet status = 'success';\n\t\tif (length < 20 || length > 80) {\n\t\t\tstatus = 'danger';\n\t\t} else if (length < 40 || length > 66) {\n\t\t\tstatus = 'warning';\n\t\t}\n\t\tprogress.removeClassPrefix('bg-')\n\t\t\t\t.addClass('bg-' + status)\n\t\t\t\t.css('width', length + '%');\n\t},\n\n\t/**\n\t * Select2 change helper\n\t */\n\tselect2ChangeHelper: (evt) => {\n\t\tconst\n\t\t\tsource = $(evt.currentTarget),\n\t\t\tdata = source.data(),\n\t\t\ttarget = $(data.amsSelect2HelperTarget);\n\n\t\tswitch (data.amsSelect2HelperType) {\n\n\t\t\tcase 'html':\n\t\t\t\ttarget.html('<div class=\"text-center\"><i class=\"fas fa-2x fa-spinner fa-spin\"></i></div>');\n\t\t\t\tconst params = {};\n\t\t\t\tparams[data.amsSelect2HelperArgument || 'value'] = source.val();\n\t\t\t\t$.get(data.amsSelect2HelperUrl, params).then((result) => {\n\t\t\t\t\tconst callback = MyAMS.core.getFunctionByName(data.amsSelect2HelperCallback) || ((result) => {\n\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\ttarget.html(result);\n\t\t\t\t\t\t\tMyAMS.core.initContent(target).then();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget.empty();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tcallback(result);\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\ttarget.empty();\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconst callback = data.amsSelect2HelperCallback;\n\t\t\t\tif (callback) {\n\t\t\t\t\tMyAMS.core.executeFunctionByName(callback, source, data);\n\t\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Refresh a DOM element with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: element properties:\n\t *   - object_id: ID of the refreshed element\n\t *   - content: new element content\n\t */\n\trefreshElement: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet element = $(`[id=\"${options.object_id}\"]`);\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, element).then(() => {\n\t\t\t\telement.replaceWith($(options.content));\n\t\t\t\telement = $(`[id=\"${options.object_id}\"]`);\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, element).then(() => {\n\t\t\t\t\tresolve(element);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a form widget with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated widget properties:\n\t *   - widget_id: ID of the refreshed widget\n\t *   - content: new element content\n\t */\n\trefreshWidget: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet widget = $(`[id=\"${options.widget_id}\"]`),\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, group).then(() => {\n\t\t\t\tgroup.replaceWith($(options.content));\n\t\t\t\twidget = $(`[id=\"${options.widget_id}\"]`);\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, group).then(() => {\n\t\t\t\t\tresolve(widget);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Add new row to table\n\t *\n\t * @param form: optional parent form\n\t * @param options: added row properties:\n\t *  - content: new row content\n\t */\n\taddTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `table[id=\"${options.table_id}\"]`,\n\t\t\t\ttable = $(selector),\n\t\t\t\tdtTable = table.DataTable();\n\t\t\tlet newRow;\n\t\t\tif (options.data) {\n\t\t\t\tdtTable.rows.add(options.data).draw();\n\t\t\t\tnewRow = $(`tr[id=\"${options.row_id}\"]`, table);\n\t\t\t\tresolve(newRow);\n\t\t\t} else {\n\t\t\t\tnewRow = $(options.content);\n\t\t\t\tdtTable.rows.add(newRow).draw();\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a table row with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated row properties:\n\t *   - row_id: ID of the refreshed row\n\t *   - content: new row content\n\t */\n\trefreshTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `tr[id=\"${options.row_id}\"]`,\n\t\t\t\trow = $(selector),\n\t\t\t\ttable = row.parents('table').first();\n\t\t\tif (options.data) {\n\t\t\t\tif ($.fn.DataTable) {\n\t\t\t\t\tconst dtTable = table.DataTable();\n\t\t\t\t\tif (typeof options.data === 'string') {\n\t\t\t\t\t\tdtTable.row(selector).remove();\n\t\t\t\t\t\tdtTable.row.add($(options.data)).draw();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdtTable.row(selector).data(options.data).draw();\n\t\t\t\t\t}\n\t\t\t\t\tresolve(row);\n\t\t\t\t} else {\n\t\t\t\t\treject('No DataTable plug-in available!');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst newRow = $(options.content);\n\t\t\t\trow.replaceWith(newRow);\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a single image with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: image properties:\n\t *   - image_id: ID of the refreshed image\n\t *   - src: new image source URL\n\t */\n\trefreshImage: (form, options) => {\n\t\tconst image = $(`[id=\"${options.image_id}\"]`);\n\t\timage.attr('src', options.src);\n\t},\n\n\t/**\n\t * Move given element to the end of it's parent\n\t *\n\t * @param element: the element to be moved\n\t * @returns {*}\n\t */\n\tmoveElementToParentEnd: (element) => {\n\t\tconst parent = element.parent();\n\t\treturn element.detach()\n\t\t\t.appendTo(parent);\n\t},\n\n\t/**\n\t * Add given element to the end of specified parent\n\t *\n\t * @param source: event source\n\t * @param element: the provided element\n\t * @param parent: the parent to which element should be added\n\t * @param props: additional props\n\t * @returns {*}\n\t */\n\taddElementToParent: (source, {element, parent, ...props}) => {\n\t\telement = $(element);\n\t\tparent = $(parent);\n\t\tconst result = element.appendTo(parent);\n\t\tif (props.scrollTo) {\n\t\t\tMyAMS.helpers.scrollTo(props.scrollParent, element);\n\t\t}\n\t\treturn result;\n\t},\n\n\t/**\n\t * Toggle dropdown associated with given event target\n\t *\n\t * @param evt: source event\n\t */\n\thideDropdown: (evt) => {\n\t\t$(evt.target).closest('.dropdown-menu').dropdown('hide');\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('helpers');\n\t} else {\n\t\tMyAMS.helpers = helpers;\n\t\tconsole.debug(\"MyAMS: helpers module loaded...\");\n\t}\n}\n"],"file":"mod-helpers-dev.js"}