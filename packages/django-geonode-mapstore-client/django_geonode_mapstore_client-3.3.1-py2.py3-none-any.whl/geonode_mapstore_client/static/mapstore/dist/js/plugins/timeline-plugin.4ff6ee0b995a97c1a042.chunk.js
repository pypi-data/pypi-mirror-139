(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4276],{80416:(e,t,n)=>{"use strict";n.d(t,{yS:()=>r,Zz:()=>o,ms:()=>i,ih:()=>a,OX:()=>c,sb:()=>u,K$:()=>s,k7:()=>l,cX:()=>f,x9:()=>p,vs:()=>d,oE:()=>m,Po:()=>y,qv:()=>b,cI:()=>v,g6:()=>g,I4:()=>h,l$:()=>O,Xv:()=>w,k3:()=>P,CQ:()=>E,R8:()=>S,HN:()=>j,sH:()=>T,c7:()=>R,_7:()=>k,eF:()=>D,O6:()=>I,ED:()=>A,RP:()=>L,sF:()=>_,VP:()=>C,He:()=>N,vO:()=>M,WO:()=>Y,bh:()=>Z,pV:()=>H,MK:()=>$,ZF:()=>V,tV:()=>x,Dv:()=>U,Yz:()=>W,kI:()=>G,XG:()=>z,A4:()=>F,Rp:()=>B,$o:()=>K,ct:()=>q,oh:()=>X,$h:()=>J,ud:()=>Q,Qr:()=>ee,LR:()=>te,nN:()=>ne,UG:()=>re,F5:()=>oe,c9:()=>ie,Jh:()=>ae,Xy:()=>ce});var r="CHANGE_LAYER_PROPERTIES",o="LAYERS:CHANGE_LAYER_PARAMS",i="CHANGE_GROUP_PROPERTIES",a="TOGGLE_NODE",c="SORT_NODE",u="REMOVE_NODE",s="UPDATE_NODE",l="MOVE_NODE",f="LAYER_LOADING",p="LAYER_LOAD",d="LAYER_ERROR",m="ADD_LAYER",y="ADD_GROUP",b="REMOVE_LAYER",v="SHOW_SETTINGS",g="HIDE_SETTINGS",h="UPDATE_SETTINGS",O="REFRESH_LAYERS",w="LAYERS:UPDATE_LAYERS_DIMENSION",P="LAYERS_REFRESHED",E="LAYERS_REFRESH_ERROR",S="LAYERS:BROWSE_DATA",j="LAYERS:DOWNLOAD",T="LAYERS:CLEAR_LAYERS",R="LAYERS:SELECT_NODE",k="LAYERS:FILTER_LAYERS",D="LAYERS:SHOW_LAYER_METADATA",I="LAYERS:HIDE_LAYER_METADATA",A="LAYERS:UPDATE_SETTINGS_PARAMS";function L(e,t,n){return{type:v,node:e,nodeType:t,options:n}}function _(){return{type:g}}function C(e){return{type:h,options:e}}function N(e,t){return{type:r,newProperties:t,layer:e}}function M(e,t){return{type:o,layer:e,params:t}}function Y(e,t){return{type:i,newProperties:t,group:e}}function Z(e,t,n){return{type:a,node:e,nodeType:t,status:!n}}function H(e){return{type:"CONTEXT_NODE",node:e}}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:c,node:e,order:t,sortLayers:n}}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:u,node:e,nodeType:t,removeEmpty:n}}function x(e,t,n){return{type:s,node:e,nodeType:t,options:n}}function U(e,t,n){return{type:l,node:e,groupId:t,index:n}}function W(e){return{type:f,layerId:e}}function G(e,t){return{type:p,layerId:e,error:t}}function z(e,t,n){return{type:d,layerId:e,tilesCount:t,tilesErrorCount:n}}function F(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:m,layer:e,foreground:t}}function B(e,t,n){return{type:y,group:e,parent:t,options:n}}function K(e){return{type:b,layerId:e}}function q(e,t){return{type:r,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function X(e){return{type:P,layers:e}}function J(e,t){return{type:E,layers:e,error:t}}function Q(e,t,n,r){return{type:w,dimension:e,value:t,options:n,layers:r}}function ee(e){return{type:S,layer:e}}function te(e){return{type:j,layer:e}}function ne(){return{type:T}}function re(e,t,n){return{type:R,id:e,nodeType:t,ctrlKey:n}}function oe(e){return{type:k,text:e}}function ie(e,t){return{type:D,metadataRecord:e,maskLoading:t}}function ae(){return{type:I}}function ce(e,t){return{type:A,newParams:e,update:t}}},59979:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(67294),o=n.n(r),i=n(52595),a=n(80681),c=n(57557),u=n.n(c),s=n(73935),l=n.n(s);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=["popoverOptions","keyProp"];function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function v(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}const h=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(h,t);var n,r,c,s,f=(c=h,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(c);if(s){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function h(){return m(this,h),f.apply(this,arguments)}return n=h,(r=[{key:"render",value:function(){var t=null,n=this.props,r=n.popoverOptions,c=n.keyProp,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,p);return o().createElement("span",{className:"mapstore-info-popover"},o().createElement(e,d({},u()(s,["renderPopover","tooltipId"]),{key:c,ref:function(e){t=e}})),o().createElement(i.Z,{placement:r.placement,shouldUpdatePosition:!0,show:!0,target:function(){return l().findDOMNode(t)}},o().createElement(a.Popover,r.props,r.content)))}}])&&y(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),h}(o().Component)}},75480:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(67294),o=n.n(r);const i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,n=void 0===t?{display:"inline-block"}:t;return o().createElement("div",{style:n,className:"mapstore-inline-loader"})}},6724:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(67294),o=n.n(r),i=n(18093),a=function(e,t,n){var r=n.maskContainerStyle,a=n.maskStyle,c=n.className,u=n.white;return function(n){return(0,i.nest)((function(n){return o().createElement("div",{className:"ms2-mask-container ".concat(c||""," ").concat(e(n)?"":"ms2-mask-empty"),style:r},n.children,e(n)?o().createElement("div",{className:"ms2-mask"+(u?" white-mask":""),style:a},t(n)):null)}),n)}};const c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.alwaysWrap,o=void 0===r||r,c=n.white,u=void 0!==c&&c,s=n.maskContainerStyle,l=void 0===s?{}:s,f=n.maskStyle,p=void 0===f?{}:f,d=n.className;return o?a(e,t,{maskContainerStyle:l,maskStyle:p,className:d,white:u}):(0,i.branch)(e,a((function(){return!0}),t,{maskContainerStyle:l,maskStyle:p,white:u}))}},38482:(e,t,n)=>{"use strict";n.d(t,{Z:()=>E});var r=n(67294),o=n.n(r),i=n(23279),a=n.n(i),c=n(45697),u=n.n(c),s=n(73935),l=n.n(s),f=n(91033);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debounceTime,n=e.querySelector,r=e.closest,i=void 0!==r&&r;return function(e){var r,c;return c=r=function(r){b(u,r);var c=g(u);function u(e){var r;return d(this,u),P(O(r=c.call(this,e)),"findDomNode",(function(){if(!r.isMounded)return null;var e=l().findDOMNode(O(r));return e&&i&&n?e.closest(n||"*"):e&&(n?e.querySelector(n):e)})),r.width=void 0,r.height=void 0,r.skipOnMount=e.skipOnMount,r.div=null,r.onResize=a()((function(){var e;return(e=r.props).onResize.apply(e,arguments)}),void 0!==t?t:e.debounceTime||1e3),r.ro=new f.Z((function(e){e.forEach((function(e){var t=e.contentRect,n=t.width,o=t.height,i=r.props.handleWidth&&r.width!==n,a=r.props.handleHeight&&r.height!==o;r.skipOnMount||!i&&!a||r.onResize({width:n,height:o}),r.width=n,r.height=o,r.skipOnMount=!1}))})),r}return y(u,[{key:"componentDidMount",value:function(){this.isMounded=!0,this.div=this.findDomNode(),this.div&&this.ro.observe(this.div)}},{key:"componentDidUpdate",value:function(){this.div=this.findDomNode(),this.div&&this.ro.observe(this.div)}},{key:"componentWillUnmount",value:function(){var e=this.findDomNode();e&&this.ro&&this.ro.unobserve&&this.ro.unobserve(e)}},{key:"render",value:function(){return o().createElement(e,this.props)}}]),u}(o().Component),P(r,"propTypes",{handleWidth:u().bool,handleHeight:u().bool,onResize:u().func}),P(r,"defaultProps",{onResize:function(){},handleWidth:!0,handleHeight:!0}),c}}},26325:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>Y});var r=n(89255),o=n(47037),i=n.n(o),a=n(27361),c=n.n(a),u=n(91175),s=n.n(u),l=n(84596),f=n.n(l),p=n(5582),d=n.n(p),m=n(89919),y=n(1550),b=n(57676),v=n(57604),g=n(80416),h=n(97395),O=n(75110),w=n(97291),P=n(85148),E=n(55237),S=n(96361);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L="time",_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,w.Li)(e),r=(0,w.uy)(e),o=(0,w.Ry)(e),i=(0,w.F3)(n)(e);return[o,r,"time",I({limit:1},t),i]},C=function(e,t,n){if((0,w.uy)(e))return r.Observable.forkJoin(S.Ci.apply(void 0,T(_(e,{sort:"asc",fromValue:n}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return j(e,1)[0]})).catch((function(e){return e&&r.Observable.of(null)})),S.Ci.apply(void 0,T(_(e,{sort:"desc",fromValue:n}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return j(e,1)[0]})).catch((function(e){return e&&r.Observable.of(null)}))).map((function(e){return(0,E.Qn)(e.filter((function(e){return!!e})),n)||n}));var o=(0,P.aK)((0,O.CA)(e,t))(e);return r.Observable.of((0,E.Qn)(o,n)||n)},N=function(e){return i()(e)?e:e.toISOString()},M=function(e,t,n){var o=t.domain.split("--"),i=(0,w.YK)(n())||{start:new Date(o[0]),end:new Date(o[1])},a=(0,E.un)(i,20),u=a.range,l=a.resolution,p=(0,O.CA)(n(),e).name,d=A({},L,"".concat(N(u.start),"/").concat(N(u.end)));return(0,S.ot)(t.source.url,p,L,A({},L,"".concat(N(u.start),"/").concat(N(u.end))),l,(0,w.F3)(e)(n())).merge((0,S.i8)(t.source.url,p,d,I(I({},(0,w.F3)(e)(n())),{},{expandLimit:20}))).scan((function(e,t){return I(I({},e),t)}),{}).switchMap((function(e){var t,n=e.Histogram,o=e.Domains,i=c()(s()(f()(c()(o,"DimensionDomain")||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Identifier;return t===L}))),"Domain");try{t=n&&n.Values&&n.Values.split(",").map((function(e){return parseInt(e,10)}))||[]}catch(e){t=[]}var a=i&&i.indexOf("--")<0&&i.split(",");return r.Observable.of({range:u,histogram:n&&n.Domain?{values:t,domain:n.Domain}:void 0,domain:i?{values:a}:void 0})}))};const Y={setTimelineCurrentTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(b.qx).throttleTime(100).switchMap((function(e){var t=e.time,n=e.group,i=o();return n?C(i,n,t).switchMap((function(e){var t=(0,w.YK)(i)||{},n=t.start,o=t.end,a=[];if(n&&o&&(d()(e).isBefore(n)||d()(e).isAfter(o))){var c=d()(o).diff(n);a=[(0,b.y3)({start:d()(e).subtract(c/2),end:d()(e).add(c/2)})]}return r.Observable.from([].concat(T(a),[(0,v.yR)(e)]))})).let((0,m.hP)((0,b.aA)(!1,!0),(0,b.aA)(!1,!1))):r.Observable.of((0,v.yR)(t))}))},settingInitialOffsetValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(b.JU).switchMap((function(e){var t=o(),n=(0,P.WT)(t),i=(0,w.YK)(t);if(e.enabled){var a=i||{},c=a.start,u=void 0===c?0:c,s=a.end,l=void 0===s?432e6:s,f=(0,P.ns)(t),p=d()(l).diff(u),m=i?d()(u).add(p/2).toISOString():d()(new Date).toISOString(),y=d()(n||m).add(p/5),g=e.enabled&&!n?r.Observable.of((0,v.yR)(m)):r.Observable.empty(),h=e.enabled&&!f||e.enabled&&d()(f).diff(n)<0?r.Observable.of((0,v.pF)(y.toISOString())):r.Observable.empty(),O=i?r.Observable.empty():r.Observable.of((0,b.y3)({start:d()(m).add(-1*p/2),end:d()(m).add(p/2)}));return g.concat(h).concat(O)}return r.Observable.of((0,v.pF)())}))},updateRangeDataOnRangeChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(b.Lv).merge(e.ofType(y.pP).filter((function(){return(0,w.cX)(o())})),e.ofType(b.w)).debounceTime(400).merge(e.ofType(v.XV).debounceTime(50)).switchMap((function(){var e,t=(0,P.m$)(o())||{},n=Object.keys(t).filter((function(e){return t[e]&&t[e].domain&&(0,E._q)(t[e].domain)||(0,w.cX)(o())}));return(e=r.Observable).merge.apply(e,T(n.map((function(e){return M(e,t[e],o).map((function(t){var n=t.range,r=t.histogram,o=t.domain;return(0,b.cO)(e,n,r,o)})).startWith((0,b.aA)(e,!0)).catch((function(){return r.Observable.of((0,h.vU)({uid:"error_with_timeline_update",title:"timeline.errors.multidim_error_title",message:"timeline.errors.multidim_error_message"}))})).concat(r.Observable.of((0,b.aA)(e,!1)))}))))}))},syncTimelineGuideLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(b.cb).merge(e.ofType(g.sb,g.yS).withLatestFrom(e.ofType(b._V),(function(e,t){var n=t.layerId;return n&&!(0,w.rV)(o()).some((function(e){return e.id===n}))})).filter((function(e){return!!e}))).switchMap((function(){var e=o(),t=c()((0,w.rV)(e),"[0].id");return(0,w.en)(e)&&t?r.Observable.of((0,b.kq)(t)):r.Observable.empty()}))},snapTimeGuideLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(b._V).filter((function(e){return(null==e?void 0:e.layerId)&&(0,w.en)(r())})).switchMap((function(e){var t=e.layerId;return C(r(),t,(0,P.WT)(r())||(new Date).toISOString()).filter((function(e){return e})).map((function(e){return(0,v.yR)(e)}))}))}}},40439:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ut});var r=n(91175),o=n.n(r),i=n(47037),a=n.n(i),c=n(5582),u=n.n(c),s=n(27418),l=n.n(s),f=n(67294),p=n.n(f),d=n(80681),m=n(33664),y=n(18093),b=n(22222),v=n(57604),g=n(62187),h=n(57676),O=n(5346),w=n(15135),P=n(38482),E=n(80717),S=n(65295),j=n(85148),T=n(55105),R=n(76843),k=n(97291),D=n(13218),I=n.n(D),A=n(70735),L=n.n(A),_=n(14293),C=n.n(_),N=n(84715),M=n(6724),Y=n(75480),Z=n(92742),H=n.n(Z),$=n(55237);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e,t){return u()(t).diff(e)>0};const G=(0,y.withHandlers)({clickHandler:function(e){var t=e.selectedLayer,n=e.offsetEnabled,r=e.status,o=e.setCurrentTime,i=void 0===o?function(){}:o,a=e.selectGroup,c=void 0===a?function(){}:a;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.time,a=e.group,u=e.what,s=e.event;if("PLAY"!==r)if("group-label"===u)a&&"PLAY"!==r&&c(a);else{var l=s&&s.target&&s.target.closest(".vis-custom-time"),f=l&&l.getAttribute("class"),p=f&&H()(f.replace("vis-custom-time",""));o&&!n&&"startPlaybackTime"!==p&&"endPlaybackTime"!==p&&i(o.toISOString(),t)}}},timechangedHandler:function(e){var t=e.currentTime,n=e.setOffset,r=void 0===n?function(){}:n,o=e.setCurrentTime,i=void 0===o?function(){}:o,a=e.currentTimeRange,c=void 0===a?{}:a,u=e.playbackRange,s=e.setPlaybackRange,l=void 0===s?function(){}:s,f=e.selectedLayer;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.time,o=e.id;if("startPlaybackTime"!==o&&"endPlaybackTime"!==o)"currentTime"===o&&(c.end?W(n,c.end)?i(n.toISOString(),null):(i(c.end),r(n.toISOString())):i(n.toISOString(),f)),"offsetTime"===o&&(W(t,n)?r(n.toISOString()):(i(n.toISOString()),r(t)));else{var a=x(x({},u),{},U({},o,n.toISOString())),s=(0,$.og)(a.startPlaybackTime,a.endPlaybackTime),p=s.start,d=s.end;W(p,d)&&l({startPlaybackTime:p,endPlaybackTime:d})}}}});function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const X=(0,y.compose)((0,y.withPropsOnChange)(["rangeItems","playbackRange","playbackEnabled","selectedLayer"],(function(e){var t=e.rangeItems,n=void 0===t?[]:t,r=e.playbackEnabled,o=e.playbackRange;return{rangeItems:r&&o&&void 0!==o.startPlaybackTime&&void 0!==o.endPlaybackTime?[].concat(K(n),[F(F({id:"playback-range"},(0,$.og)(o.startPlaybackTime,o.endPlaybackTime)),{},{type:"background",className:"ms-playback-range"})]).filter((function(e){return e})):n}})),(0,y.compose)((0,y.withHandlers)({onUpdate:function(e){var t=e.moveCurrentRange,n=void 0===t?function(){}:t;return function(e){var t=e.id,r=e.start;"current-range"===t&&n(r.toISOString())}}}),(0,y.withPropsOnChange)(["options","onUpdate"],(function(e){var t=e.options,n=void 0===t?{}:t,r=e.onUpdate,o=void 0===r?function(){}:r;return{options:F(F({},n),{},{snap:null,editable:{add:!1,updateTime:!1,updateGroup:!1,remove:!1,overrideItems:!1},onMove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;o(e),t(e)}})}})),(0,y.withPropsOnChange)(["rangeItems","currentTime","offsetEnabled","selectedLayer","currentTimeRange","readOnly"],(function(e){var t=e.currentTimeRange,n=e.rangeItems,r=void 0===n?[]:n,o=e.readOnly;return{rangeItems:e.offsetEnabled&&void 0!==t.start&&void 0!==t.end?[].concat(K(r),[F(F({id:"current-range",editable:{updateTime:!o,updateGroup:!1,remove:!1}},(0,$.og)(t.start,t.end)),{},{type:"background",className:"ms-current-range"})]).filter((function(e){return e})):r}}))),(0,y.withPropsOnChange)(["currentTime","playbackRange","playbackEnabled","offsetEnabled","currentTimeRange"],(function(e){var t=e.currentTime,n=e.playbackRange,r=e.playbackEnabled,o=e.offsetEnabled,i=e.currentTimeRange;return{customTimes:[t?{currentTime:t}:{},r&&n&&n.startPlaybackTime&&n.endPlaybackTime?n:{},o&&i?{offsetTime:i.end}:{}].reduce((function(e,t){return t?F(F({},e),t):F({},e)}),{})}})));var J=n(8316),Q=n(45697),ee=n.n(Q),te=n(16307),ne=n.n(te),re=(n(14880),n(91966)),oe=n.n(re),ie=n(3674),ae=n.n(ie),ce=n(25325),ue=n.n(ce),se=n(71843),le=n.n(se),fe=n(66073),pe=n.n(fe),de=n(57557),me=n.n(de),ye=n(28583),be=n.n(ye),ve=n(24262);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function he(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pe(e,t)}function Ee(e,t){if(t&&("object"===ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Se(e)}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ne().timeline.components.items.BackgroundItem.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["timeline-item"]=this,this.dirty=!0)};var Re=function(){},ke=["currentTimeTick","click","contextmenu","doubleClick","groupDragged","changed","rangechange","rangechanged","select","drop","timechange","timechanged","mouseOver","mouseMove","mouseleave","itemover","itemout","mouseDown","mouseUp"],De={},Ie={};pe()(ke,(function(e){return De[e]=ee().func,Ie["".concat(e,"Handler")]=Re,[De,Ie]}));var Ae={items:ee().array,rangeItems:ee().array,groups:ee().array,options:ee().object,selectionOptions:ee().object,selection:ee().array,customTimes:ee().shape({datetime:ee().instanceOf(Date),id:ee().string}),animate:ee().oneOfType([ee().bool,ee().object]),currentTime:ee().oneOfType([ee().string,ee().instanceOf(Date),ee().number])},Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=je(r);if(o){var n=je(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ee(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Te(Se(t=i.call(this,e)),"setAllItems",(function(e){t.$el.setItems([].concat(he(e||[]),he(t.props.rangeItems||[])))})),Te(Se(t),"setItems",(function(e){(e.length||0)+(t.props.rangeItems&&t.props.rangeItems.length||0)>0?t.$el.initialFitDone?t.setAllItems(e):(t.setAllItems(e),t.$el.emit("changed")):t.$el.initialRangeChangeDone&&t.setAllItems(e)})),t.state={customTimes:[]},t}return t=a,n=[{key:"componentDidMount",value:function(){var e=this,t=this.refs.container;this.$el=new(ne().Timeline)(t,void 0,this.props.options),ke.forEach((function(t){return e.$el.on(t,e.props["".concat(t,"Handler")])})),this.init()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.items,r=t.groups,o=t.options,i=t.selection,a=t.customTimes,c=t.readOnly,u=t.rangeItems,s=n!==e.items,l=r!==e.groups,f=o!==e.options,p=a!==e.customTimes,d=i!==e.selection,m=c!==e.readOnly,y=u!==e.rangeItems;return s||l||f||p||d||m||y}},{key:"componentDidUpdate",value:function(e){this.init(e)}},{key:"componentWillUnmount",value:function(){this.$el.destroy()}},{key:"render",value:function(){return p().createElement("div",{ref:"container",className:this.props.readOnly?"read-only-timeline":"",onMouseOut:this.props.onMouseOutHandler})}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,r=n.items,o=n.rangeItems,i=n.groups,a=n.options,c=n.selection,s=n.selectionOptions,l=void 0===s?{}:s,f=n.customTimes,p=n.animate,d=void 0===p||p,m=n.currentTime,y=n.timelineLayers,b=a;d&&(b=me()(a,"start","end"),a.start&&a.end?this.$el.setWindow(a.start,a.end,{animation:d}):this.$el.setWindow(u()().subtract(1,"month"),u()().add(1,"month"),{animation:d})),this.$el.setOptions(b);var v=(0,ve.$Z)(i,y);if(v.length>0){var g=new(ne().DataSet);g.add(v),this.$el.setGroups(g)}if(r&&r!==t.items)this.setItems(r);else if(o!==t.rangeItems){var h=this.$el&&this.$el.itemsData&&this.$el.itemsData.getDataSet();if(h){var O=le()(o||[],t.rangeItems||[],"id"),w=L()(o||[],t.rangeItems||[],"id"),P=L()(t.rangeItems||[],o||[],"id");O.map((function(e){return h.update(e)})),w.map((function(e){return h.add(e)})),P.map((function(e){var t=e.id;return h.remove(t)}))}else this.setItems(r)}this.$el.setSelection(c,l),m&&this.$el.setCurrentTime(m);var E=ae()(this.state.customTimes),S=ae()(f),j=oe()(S,E),T=oe()(E,S),R=ue()(E,S);pe()(T,(function(t){return e.$el.removeCustomTime(t)})),pe()(j,(function(t){var n=f[t];e.$el.addCustomTime(n,t)})),pe()(R,(function(t){var n=f[t];e.$el.setCustomTime(n,t)})),this.setState({customTimes:f}),(this.props.readOnly!==t.readOnly||this.props.readOnly&&j.length>0)&&pe()(this.$el.customTimes,(function(n){e.props.readOnly?n.hammer.off("panstart panmove panend"):!0===t.readOnly&&(n.hammer.on("panstart",n._onDragStart.bind(n)),n.hammer.on("panmove",n._onDrag.bind(n)),n.hammer.on("panend",n._onDragEnd.bind(n)))}))}}],n&&we(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p().Component);Te(Le,"propTypes",be()(Ae,De)),Te(Le,"defaultProps",be()({items:[],groups:[],options:{},selection:[],customTimes:{}},Ie));const _e=Le;function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=(0,N.o)((function(e,t){return e===t||!C()(e)&&!C()(t)&&e.id===t.id&&e.title===t.title&&e.name===t.name}))(k.rV,(function(e){return e})),Ze=(0,y.compose)((0,m.connect)((0,b.P1)(k.YK,k.__,Ye,k.E2,J.Pz,(function(e,t,n,r,o){return{viewRange:e,items:t,layers:n,loading:r,currentLocale:o}}))),(0,y.withPropsOnChange)((function(e,t){var n=e.layers,r=void 0===n?[]:n,o=e.loading,i=e.selectedLayer,a=e.currentLocale,c=t.layers,u=t.loading,s=t.selectedLayer,l=t.nextLocale,f=e.hideLayersName!==t.hideLayersName;return o!==u||i!==s||a!==l||f||r&&c&&r.length!==c.length||L()(r,c||[],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.title,r=e.name;return t+n+r})).length>0}),(function(e){var t=e.layers,n=void 0===t?[]:t,r=e.loading,o=void 0===r?{}:r,i=e.selectedLayer,c=e.currentLocale;return{groups:n.map((function(e){var t;return{id:e.id,className:(o[e.id]?"loading":"")+(e.id&&e.id===i?" selected":""),content:'<div class="timeline-layer-label-container">'+(o[e.id]?'<div class="timeline-layer-icon"><div class="timeline-spinner"></div></div>':'<div class="timeline-layer-icon">'.concat(e.id&&e.id===i?'<i class="glyphicon glyphicon-time"></i>':"","</div>"))+'<div class="timeline-layer-title">'.concat(I()(e.title)?null!==(t=e.title[c])&&void 0!==t?t:e.title.default:a()(e.title)&&e.title?e.title:e.name,"</div>")+"</div>"}}))}}))),He=(0,y.compose)((0,m.connect)((0,b.P1)(j.WT,k.m_,(function(e,t){return{currentTime:e,currentTimeRange:t}})),{setCurrentTime:h.HM,moveCurrentRange:v.PZ,setOffset:v.pF})),$e=(0,y.compose)((0,m.connect)((0,b.zB)({playbackRange:R.KC,status:R.dS}),{setPlaybackRange:g.VS})),Ve=(0,y.compose)((0,m.connect)((0,b.P1)(k.Li,(function(e){return{selectedLayer:e}})),{selectGroup:h.kq})),xe=(0,y.compose)((0,m.connect)((function(){return{}}),{rangechangedHandler:h.y3}));const Ue=(0,y.compose)(He,$e,Ve,G,xe,Ze,(0,y.defaultProps)({key:"timeline",options:{maxHeight:"90%",verticalScroll:!0,stack:!1,showMajorLabels:!0,showCurrentTime:!1,zoomMin:10,zoomable:!0,type:"background",margin:{item:0,axis:0},format:{minorLabels:{minute:"h:mma",hour:"ha"}},itemsAlwaysDraggable:!0,moment:function(e){return u()(e).utc()}}}),(0,y.withPropsOnChange)(["viewRange","options"],(function(e){var t=e.viewRange,n=void 0===t?{}:t;return{options:Ne(Ne({},e.options),n)}})),(0,y.withPropsOnChange)(["status"],(function(e){return{readOnly:"PLAY"===e.status}})),X,(0,M.Z)((function(e){var t=e.loading;return t&&t.timeline}),(function(){return p().createElement("div",{style:{margin:"auto",fontWeight:"bold"}},p().createElement(Y.Z,{style:{display:"inline-block",verticalAlign:"middle"}}),p().createElement(O.Z,{msgId:"loading"}))}),{white:!0}))(_e);var We=n(89255),Ge=n(59979),ze=n(38560);function Fe(){return Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fe.apply(this,arguments)}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xe=(0,y.compose)((0,y.withProps)({collapseHintPopoverOptions:{placement:"top",props:{title:p().createElement("span",null,p().createElement(d.Glyphicon,{glyph:"time"})," ",p().createElement("strong",null,p().createElement(O.Z,{msgId:"timeline.collapsed.title"})))},content:p().createElement(O.Z,{msgId:"timeline.collapsed.tooltip"})}}),(0,y.mapPropsStream)((function(e){return e.combineLatest(function(e){return e.distinctUntilKeyChanged("collapsed").filter((function(e){return e.collapsed})).take(1).switchMap((function(e){var t=e.collapseHintPopoverOptions;return We.Observable.timer(5e3).startWith({popoverOptions:t}).concat(We.Observable.of({}))})).startWith({})}(e),(function(e,t){return Ke(Ke({},e),t)}))})),(0,y.branch)((function(e){return e.popoverOptions}),Ge.Z,w.Z))(ze.Z);const Je=(0,y.compose)((0,m.connect)((0,b.P1)(k.zb,k.qJ,(function(e,t){return{collapsed:e,visible:t}})),{setCollapsed:h.w2}),(0,y.branch)((function(e){return!e.visible}),y.renderNothing),(0,y.withHandlers)({onClick:function(e){var t=e.collapsed,n=e.setCollapsed;return function(){return n(!t)}}}),(0,y.withProps)((function(e){var t=e.collapsed;return{bsStyle:t?"primary":"success",tooltipId:t?"timeline.show":"timeline.hide"}})))((function(e){return p().createElement(Xe,Fe({},e,{bsSize:"xsmall"}),p().createElement(d.Glyphicon,{glyph:"time"}))}));function Qe(){return Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe.apply(this,arguments)}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rt=(0,w.Z)(ze.Z),ot=function(e){return a()(e)&&-1!==e.indexOf("%")},it=function(e){return parseInt(e,10)/100},at=function(e,t){return u()(t).diff(e)>0},ct=(0,y.compose)((0,m.connect)((0,b.P1)(k.pn,k.rV,j.WT,k.m_,j.RP,R.KC,R.dS,k.YK,(function(e,t,n,r,o,i,a,c){return{visible:e,layers:t,currentTime:n,currentTimeRange:r,offsetEnabled:o,playbackRange:i,status:a,viewRange:c}})),{setCurrentTime:h.HM,onOffsetEnabled:h.PQ,setOffset:v.pF,setPlaybackRange:g.VS,moveRangeTo:h.y3,onInit:h._e}),(0,y.branch)((function(e){var t=e.visible,n=void 0===t||t,r=e.layers,o=void 0===r?[]:r;return!n||0===Object.keys(o).length}),y.renderNothing),(0,y.withState)("options","setOptions",{collapsed:!0}),(0,m.connect)((0,b.P1)(k.cX,(function(e){return{mapSync:e}})),{toggleMapSync:h.Z7}),(0,y.compose)((0,y.compose)((0,y.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{containerWidth:e.width}}}}),(0,P.Z)({querySelector:".ms2",closest:!0,debounceTime:100})),(0,y.defaultProps)({showHiddenLayers:!1,style:{marginBottom:35,marginLeft:100,marginRight:80}}),(0,m.connect)((0,b.P1)((function(e){return(0,T.ic)(e,{right:!0,bottom:!0,left:!0})}),(function(e){return{mapLayoutStyle:e}}))),(0,y.withProps)((function(e){var t=e.containerWidth,n=e.style,r=e.mapLayoutStyle,o=n||{},i=o.marginLeft,a=o.marginRight,c=r.left,u=void 0===c?0:c,s=r.right,l=void 0===s?0:s;if(l=ot(l)&&it(l)*t||l,u=ot(u)&&it(u)*t||u,t){var f=t-l-u-i-a;return{hide:f<410,compactToolbar:f<880,style:tt(tt(tt({},n),r),{},{minWidth:410})}}return{style:tt(tt(tt({},n),r),{},{minWidth:410})}})),(0,y.branch)((function(e){return e.hide}),y.renderNothing),(0,y.setDisplayName)("TimelinePlugin")))((function(e){var t=e.items,n=e.options,r=e.setOptions,i=e.mapSync,a=e.toggleMapSync,c=void 0===a?function(){}:a,s=e.currentTime,l=e.setCurrentTime,m=e.offsetEnabled,y=e.onOffsetEnabled,b=e.currentTimeRange,v=e.setOffset,g=e.style,h=e.status,w=e.viewRange,P=e.moveRangeTo,j=e.compactToolbar,T=e.showHiddenLayers,R=e.onInit,k=void 0===R?function(){}:R,D=e.layers;(0,f.useEffect)((function(){k(T)}),[k]);var I=n.hideLayersName,A=n.collapsed,L=o()(t&&t.filter((function(e){return"playback"===e.name}))),_=L&&L.plugin,C=function(e,t,n,r){var o=u()(n.end).diff(n.start)/2;if("time-current"===t&&n&&n.start.toString()!==u()(e).add(-1*o).toString()&&n.end.toString()!==u()(e).add(o).toString()&&P({start:u()(e).add(-1*o),end:u()(e).add(o)}),"range-start"===t||"range-end"===t){var i=u()(r.end).diff(r.start),a=u()(r.start).add(i/2);P(i/2<=o?{start:u()(a).add(-1*o),end:u()(a).add(o)}:{start:u()(a).add(-1*i*5/2),end:u()(a).add(5*i/2)})}};return p().createElement("div",{style:tt(tt({position:"absolute",marginBottom:35,marginLeft:100,background:"transparent"},g),{},{right:A?"auto":g.right||0}),className:"timeline-plugin".concat(I?" hide-layers-name":"").concat(m?" with-time-offset":""," ").concat((0,ve.ab)(D)?"":"hidden")},m&&p().createElement(S.Z,{clickable:!A,glyph:"range-start",onIconClick:function(e,t){return"PLAY"!==h&&C(e,t,w,b)},tooltip:p().createElement(O.Z,{msgId:"timeline.rangeStart"}),showButtons:!0,date:s||b&&b.start,onUpdate:function(e){return(b&&at(e,b.end)||!b)&&"PLAY"!==h&&l(e)},className:"shadow-soft",style:{position:"absolute",top:-5,left:2,transform:"translateY(-100%)"}}),p().createElement("div",{className:"timeline-plugin-toolbar".concat(j?" ms-collapsed":"")},m&&b?p().createElement(S.Z,{clickable:!A,glyph:"range-end",onIconClick:function(e,t){return"PLAY"!==h&&C(e,t,w,b)},tooltip:p().createElement(O.Z,{msgId:"timeline.rangeEnd"}),date:b.end,showButtons:!0,onUpdate:function(e){return"PLAY"!==h&&at(s,e)&&v(e)}}):p().createElement(S.Z,{clickable:!A,glyph:"time-current",showButtons:!0,onIconClick:function(e,t){return"PLAY"!==h&&C(e,t,w)},tooltip:p().createElement(O.Z,{msgId:"timeline.currentTime"}),date:s||b&&b.start,onUpdate:function(e){return(b&&at(e,b.end)||!b)&&"PLAY"!==h&&l(e)}}),p().createElement("div",{className:"timeline-plugin-btn-group"},p().createElement(E.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"list",tooltip:p().createElement(O.Z,{msgId:I?"timeline.showLayerName":"timeline.hideLayerName"}),bsStyle:I?"primary":"success",visible:!A,active:!I,onClick:function(){return r(tt(tt({},n),{},{hideLayersName:!I}))}},{glyph:"time-offset",bsStyle:m?"success":"primary",active:m,disabled:"PLAY"===h,tooltip:p().createElement(O.Z,{msgId:m?"timeline.disableRange":"timeline.enableRange"}),onClick:function(){"PLAY"!==h&&y(!m)}},{glyph:"map-synch",tooltip:p().createElement(O.Z,{msgId:i?"timeline.mapSyncOn":"timeline.mapSyncOff"}),bsStyle:i?"success":"primary",active:i,onClick:function(){return c(!i)}}]}),_&&p().createElement(_,Qe({},L,{settingsStyle:{right:A||j?40:"unset"}}))),p().createElement(rt,{onClick:function(){return r(tt(tt({},n),{},{collapsed:!A}))},className:"square-button-sm ms-timeline-expand",bsStyle:"primary",tooltip:p().createElement(O.Z,{msgId:A?"timeline.expand":"timeline.collapse"})},p().createElement(d.Glyphicon,{glyph:A?"chevron-up":"chevron-down"}))),!A&&p().createElement(Ue,{offsetEnabled:m,playbackEnabled:!0,hideLayersName:I,timelineLayers:D}))}));const ut={TimelinePlugin:l()(ct,{disablePluginIf:"{state('mapType') === 'cesium'}",WidgetsTray:{tool:p().createElement(Je,null),position:0}}),reducers:{dimension:n(37307).Z,timeline:n(55545).Z},epics:n(26325).ZP}},55545:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(80416),o=n(82904),i=n(57676),a=n(61868),c=n(28583),u=n.n(c),s=n(35937),l=n.n(s),f=n(18721),p=n.n(f);const d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{autoSelect:!0,collapsed:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.M5:return(0,a.t8)("settings.collapsed",t.collapsed,e);case i.w:return(0,a.t8)("settings.mapSync",t.mapSync,e);case i.Lv:return(0,a.t8)("range",{start:t.start,end:t.end},e);case i.iv:return(0,a.t8)("rangeData[".concat(t.layerId,"]"),{range:t.range,histogram:t.histogram,domain:t.domain},e);case i.br:return t.layerId?(0,a.t8)("loading[".concat(t.layerId,"]"),t.loading,e):(0,a.t8)("loading.timeline",t.loading,e);case i._V:case i.Xe:return(0,a.t8)("selectedLayer",t.layerId,e);case r.sb:var n=e;return u()({},e,{rangeData:p()(n.rangeData,t.node)?l()(n.rangeData,(function(e,n){return n!==t.node})):n.rangeData,loading:p()(n.rangeData,t.node)?l()(n.loading,(function(e,n){return n!==t.node})):n.loading,selectedLayer:e.selectedLayer===t.node?void 0:e.selectedLayer});case o.l:return u()({},e,{range:void 0,rangeData:void 0,selectedLayer:void 0,loading:void 0,MouseEvent:void 0});case i.p:return(0,a.t8)("settings.showHiddenLayers",t.showHiddenLayers,e);default:return e}}},55105:(e,t,n)=>{"use strict";n.d(t,{Nr:()=>f,ic:()=>p,Jz:()=>m,VM:()=>y,CF:()=>b});var r=n(91175),o=n.n(r),i=n(827),a=n(52259);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e){return e.maplayout&&e.maplayout.layout||{}},f=function(e){return e.maplayout&&e.maplayout.boundingMapRect||{}},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=l(e);return n&&Object.keys(n).filter((function(e){return t[e]})).reduce((function(e,t){return u(u({},e),{},s({},t,n[t]))}),{})||{}},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=l(e),r=!!o()(t.filter((function(e){return n[e.key]})).map((function(e){return"not"===e.type?n[e.key]!==e.value&&n[e.key]:n[e.key]===e.value})));return r},m=function(e){return d(e,[{key:"right",value:658}])},y=function(e){return d(e,[{key:"bottom",value:30,type:"not"}])},b=function(e){var t=(0,i.Od)(e),n=f(e);return n&&t&&t.size&&{left:(0,a.parseLayoutValue)(n.left,t.size.width),bottom:(0,a.parseLayoutValue)(n.bottom,t.size.height),right:(0,a.parseLayoutValue)(n.right,t.size.width),top:(0,a.parseLayoutValue)(n.top,t.size.height)}}}}]);