(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{186:function(e,t,a){},277:function(e,t,a){},279:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(26),c=a(10),i=a.n(c),o=a(6),s=a(29),l=a(13),d=a(107),u=function(){var e=sessionStorage.getItem("sessionId");return null==e&&(e=Object(d.v4)(),sessionStorage.setItem("sessionId",e)),e},b=a(37),j=(a(186),a(12)),p=a.n(j),f=a(17),h=a(19),v=Object(h.b)({name:"app",initialState:{view:"app",files:[],filesState:"unknown"},reducers:{setView:function(e,t){e.view=t.payload},setFilesState:function(e,t){e.filesState=t.payload},setFiles:function(e,t){e.files=t.payload}}}),x=v.reducer,m=v.actions,O=m.setView,g=m.setFilesState,y=m.setFiles,k=function(e){return e.app.view},w=function(e){return e.app.filesState},N=function(e){return e.app.files},S=a(1);function C(e){var t=e.showFiles,a=Object(o.b)();return Object(S.jsxs)("header",{className:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0",children:[Object(S.jsx)("a",{className:"navbar-brand col-md-3 col-lg-3 me-0 px-3",href:"/",children:Object(S.jsx)("img",{alt:"Mercury",src:"/static/mercury_red.svg",style:{height:"24px"}})}),t&&Object(S.jsxs)("ul",{className:"nav col-12 col-lg-auto me-lg-auto mb-2 mb-md-0",children:[Object(S.jsx)("li",{children:Object(S.jsxs)("button",{className:"nav-link px-2 text-white",style:{background:"transparent",border:"none",fontSize:"0.9em"},onClick:function(){a(O("app"))},children:[Object(S.jsx)("i",{className:"fa fa-laptop","aria-hidden":"true"})," "," App"]})}),Object(S.jsx)("li",{children:Object(S.jsxs)("button",{className:"nav-link px-2 text-white",style:{background:"transparent",border:"none",fontSize:"0.9em"},onClick:function(){a(O("files"))},children:[Object(S.jsx)("i",{className:"fa fa-folder-open-o","aria-hidden":"true"})," "," Output Files"]})})]}),Object(S.jsx)("button",{className:"navbar-toggler position-absolute d-md-none collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#sidebarMenu","aria-controls":"sidebarMenu","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(S.jsx)("span",{className:"navbar-toggler-icon",style:{height:"15px",width:"15px"}})})]})}var T=a(56),R=a(47),P=Object(h.b)({name:"tasks",initialState:{currentTask:{}},reducers:{setCurrentTask:function(e,t){e.currentTask=t.payload}}}),M=P.reducer,A=P.actions.setCurrentTask,_=function(e){return e.tasks.currentTask},F=function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r,c,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u(),t.prev=1,r="/api/v1/latest_task/".concat(e,"/").concat(n),t.next=5,i.a.get(r);case 5:c=t.sent,o=c.data,a(A(o)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),a(A({}));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},E=Object(h.b)({name:"widgets",initialState:{widgets:{}},reducers:{setWidgetValue:function(e,t){var a=t.payload,n=a.key,r=a.value;e.widgets[n]=r},clearWidgets:function(e){e.widgets={}}}}),W=E.reducer,L=E.actions,D=L.setWidgetValue,z=(L.clearWidgets,function(e){return e.widgets.widgets});function I(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.disabled,c=Object(o.b)();return Object(S.jsxs)("div",{className:"form-group form-check form-switch mb-3",children:[Object(S.jsx)("input",{className:"form-check-input",type:"checkbox",id:"checkbox-".concat(a),disabled:r,onChange:function(){c(D({key:t,value:!n}))},checked:null!=n&&n}),Object(S.jsx)("label",{className:"form-check-label",htmlFor:"checkbox-".concat(a),children:a})]})}var H=a(108),K=a.n(H);function B(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.min,c=e.max,i=e.step,s=e.disabled,l=Object(o.b)(),d=0,u=100,b=1;return r&&(d=r),c&&(u=c),i&&(b=i),Object(S.jsxs)("div",{className:"form-group mb-3",children:[Object(S.jsx)("label",{htmlFor:"checkbox-".concat(a),children:a}),Object(S.jsx)(K.a,{className:"form-control",disabled:s,value:n,min:d,max:u,step:b,onChange:function(e){l(D({key:t,value:e}))}})]})}var U=a(8),V=a(39);function J(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.min,c=e.max,i=e.step,s=(e.vertical,e.disabled),l=Object(o.b)(),d=0,u=100,b=1;r&&(d=r),c&&(u=c),i&&(b=i);var j=null!=n&&void 0!==n&&2===n.length?n:[d,u];return Object(S.jsxs)("div",{className:"form-group mb-3",children:[Object(S.jsx)("label",{htmlFor:"range-slider-".concat(a),children:a}),Object(S.jsx)("div",{style:{paddingTop:"12px",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(S.jsx)(V.Range,{disabled:s,values:j,step:b,min:d,max:u,onChange:function(e){l(D({key:t,value:e}))},renderTrack:function(e){var t=e.props,a=e.children;return Object(S.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(U.a)(Object(U.a)({},t.style),{},{height:"36px",display:"flex",width:"100%"}),children:Object(S.jsxs)("div",{ref:t.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:Object(V.getTrackBackground)({values:j,colors:["#ccc",s?"rgba(0, 0, 0, 0.3)":"#2684ff","#ccc"],min:d,max:u}),alignSelf:"center"},children:[a,Object(S.jsxs)("div",{style:{display:"inline-block",width:"100%",fontSize:"12px",paddingTop:"13px"},children:[Object(S.jsx)("div",{style:{float:"left"},children:d}),Object(S.jsx)("div",{style:{float:"right"},children:u})]})]})})},renderThumb:function(e){var t=e.index,a=e.props,n=e.isDragged;return Object(S.jsxs)("div",Object(U.a)(Object(U.a)({},a),{},{style:Object(U.a)(Object(U.a)({},a.style),{},{height:"18px",width:"18px",border:"None !important",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA",outline:"none"}),children:[Object(S.jsx)("div",{style:{position:"absolute",top:"-24px",color:"#fff",fontWeight:"bold",fontSize:"12px",fontFamily:"Arial,Helvetica Neue,Helvetica,sans-serif",padding:"2px",borderRadius:"3px",backgroundColor:s?"rgba(0, 0, 0, 0.3)":"#2684ff"},children:j[t]}),Object(S.jsx)("div",{style:{height:"12px",width:"3px",backgroundColor:n?"#2684ff":"#CCC"}})]}))}})})]})}var Y=a(155);function q(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.choices,c=e.multi,i=e.disabled,s=Object(o.b)(),l={menu:function(e){return Object(U.a)(Object(U.a)({},e),{},{zIndex:100})}},d={value:"",label:""},u=[{value:"",label:""}],b=r.map((function(e){return n&&e===n&&!c&&(d={value:e,label:e}),{value:e,label:e}}));return c&&(u=[],r.map((function(e){return n&&n.includes(e)&&c&&u.push({value:e,label:e}),{value:e,label:e}}))),Object(S.jsxs)("div",{className:"form-group mb-3",children:[Object(S.jsx)("label",{htmlFor:"select-".concat(a),children:a}),Object(S.jsx)(Y.a,{id:"select-".concat(a),isDisabled:i,name:a||"Select",styles:l,value:c?u:d,options:b,isMulti:c,onChange:function(e){if(e)if(function(e){return void 0!==e.value}(e))s(D({key:t,value:e.value}));else{var a=Array.from(e.values()).filter((function(e){return void 0!==e}));s(D({key:t,value:a.map((function(e){return e.value}))}))}}})]})}function G(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.min,c=e.max,i=e.step,s=(e.vertical,e.disabled),l=Object(o.b)(),d=0,u=100,b=1;r&&(d=r),c&&(u=c),i&&(b=i);var j=[null!==n?n:u];return Object(S.jsxs)("div",{className:"form-group mb-3",children:[Object(S.jsx)("label",{htmlFor:"slider-".concat(a),children:a}),Object(S.jsx)("div",{style:{paddingTop:"12px",display:"flex",justifyContent:"center",flexWrap:"wrap"},children:Object(S.jsx)(V.Range,{disabled:s,values:j,step:b,min:d,max:u,onChange:function(e){l(D({key:t,value:e[0]}))},renderTrack:function(e){var t=e.props,a=e.children;return Object(S.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(U.a)(Object(U.a)({},t.style),{},{height:"36px",display:"flex",width:"100%"}),children:Object(S.jsxs)("div",{ref:t.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:Object(V.getTrackBackground)({values:j,colors:[s?"rgba(0, 0, 0, 0.3)":"#2684ff","#ccc"],min:d,max:u}),alignSelf:"center"},children:[a,Object(S.jsxs)("div",{style:{display:"inline-block",width:"100%",fontSize:"12px",paddingTop:"13px"},children:[Object(S.jsx)("div",{style:{float:"left"},children:d}),Object(S.jsx)("div",{style:{float:"right"},children:u})]})]})})},renderThumb:function(e){var t=e.props,a=e.isDragged;return Object(S.jsxs)("div",Object(U.a)(Object(U.a)({},t),{},{style:Object(U.a)(Object(U.a)({},t.style),{},{height:"18px",width:"18px",border:"None",borderRadius:"4px",backgroundColor:"#FFF",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"0px 2px 6px #AAA",outline:"none"}),children:[Object(S.jsx)("div",{style:{position:"absolute",top:"-24px",color:"#fff",fontWeight:"bold",fontSize:"12px",fontFamily:"Arial,Helvetica Neue,Helvetica,sans-serif",padding:"2px",borderRadius:"3px",backgroundColor:s?"rgba(0, 0, 0, 0.3)":"#2684ff"},children:j[0]}),Object(S.jsx)("div",{style:{height:"12px",width:"3px",backgroundColor:a?"#2684ff":"#CCC"}})]}))}})})]})}var Q=a(58),X=a.n(Q);function Z(e){return"checkbox"===e.input}function $(e){return"numeric"===e.input}function ee(e){return"slider"===e.input}function te(e){return"range"===e.input}function ae(e){return"file"===e.input}function ne(e){return"text"===e.input}var re=a(72),ce=a(109),ie=a.n(ce),oe=a(110),se=a.n(oe),le=a(111),de=a.n(le);function ue(e){var t=e.widgetKey,a=e.label,n=e.maxFileSize,r=e.disabled,c=Object(o.b)(),s="100MB";return n&&(s=n),Object(S.jsxs)("div",{className:"form-group mb-3",children:[Object(S.jsx)("label",{htmlFor:"file-".concat(a),children:a}),Object(S.jsx)("div",{children:Object(S.jsx)(re.FilePond,{disabled:r,maxFileSize:s,onprocessfile:function(e,a){c(D({key:t,value:a.serverId}))},server:{url:"".concat(i.a.defaults.baseURL,"/api/v1/fp"),process:"/process/",revert:function(){var e=Object(f.a)(p.a.mark((function e(a,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.delete("".concat(i.a.defaults.baseURL,"/api/v1/fp/revert"),{data:a});case 3:c(D({key:t,value:[]})),n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r("Problem with uploaded file removal");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}()},labelIdle:'Drag & Drop your file or <span class="filepond--label-action">Browse</span>'})})]})}function be(e){var t=e.widgetKey,a=e.label,n=e.value,r=e.rows,c=e.disabled,i=Object(o.b)(),s=r||1,l=function(e){return e.replace(/[^a-z0-9.,_\-\s!?=><]/gim,"")};return Object(S.jsxs)("div",{className:"form-group mb-3",children:[Object(S.jsx)("label",{htmlFor:"textarea-".concat(a),children:a}),1===s&&Object(S.jsx)("input",{className:"form-control",type:"text",id:"text-".concat(a),value:n,onChange:function(e){i(D({key:t,value:l(e.target.value)}))},disabled:c}),s>1&&Object(S.jsx)("textarea",{className:"form-control",id:"text-area-".concat(a),rows:s,value:n,onChange:function(e){i(D({key:t,value:l(e.target.value)}))},disabled:c})]})}function je(e){var t=e.notebookTitle,a=e.notebookId,r=(e.loadingState,e.waiting),c=e.widgetsParams,s=e.watchMode,l=e.notebookPath,d=Object(o.b)(),j=Object(o.c)(z);Object(n.useEffect)((function(){if(c)for(var e=0,t=Object.entries(c);e<t.length;e++){var a=Object(b.a)(t[e],2),n=a[0],r=a[1];"file"===r.input?d(D({key:n,value:[]})):"text"===r.input?d(D({key:n,value:r.value?r.value:""})):d(D({key:n,value:r.value}))}}),[d,c]);var h=[],v=[];if(c)for(var x=0,m=Object.entries(c);x<m.length;x++){var O=Object(b.a)(m[x],2),g=O[0],y=O[1];"select"===y.input?h.push(Object(S.jsx)(q,{widgetKey:g,disabled:r,label:null===y||void 0===y?void 0:y.label,value:j[g],choices:null===y||void 0===y?void 0:y.choices,multi:null===y||void 0===y?void 0:y.multi},g)):Z(y)?h.push(Object(S.jsx)(I,{widgetKey:g,disabled:r,label:null===y||void 0===y?void 0:y.label,value:j[g]},g)):$(y)?h.push(Object(S.jsx)(B,{widgetKey:g,disabled:r,label:null===y||void 0===y?void 0:y.label,value:j[g],min:null===y||void 0===y?void 0:y.min,max:null===y||void 0===y?void 0:y.max,step:null===y||void 0===y?void 0:y.step},g)):ee(y)?h.push(Object(S.jsx)(G,{widgetKey:g,disabled:r,label:null===y||void 0===y?void 0:y.label,value:j[g],min:null===y||void 0===y?void 0:y.min,max:null===y||void 0===y?void 0:y.max,step:null===y||void 0===y?void 0:y.step,vertical:null===y||void 0===y?void 0:y.vertical},g)):te(y)?h.push(Object(S.jsx)(J,{widgetKey:g,disabled:r,label:null===y||void 0===y?void 0:y.label,value:j[g],min:null===y||void 0===y?void 0:y.min,max:null===y||void 0===y?void 0:y.max,step:null===y||void 0===y?void 0:y.step,vertical:null===y||void 0===y?void 0:y.vertical},g)):ae(y)?(h.push(Object(S.jsx)(ue,{widgetKey:g,disabled:r,label:null===y||void 0===y?void 0:y.label,maxFileSize:null===y||void 0===y?void 0:y.maxFileSize},g)),v.push(g)):ne(y)&&h.push(Object(S.jsx)(be,{widgetKey:g,disabled:r,label:null===y||void 0===y?void 0:y.label,value:j[g],rows:null===y||void 0===y?void 0:y.rows},g))}var k=function(){if(0===v.length)return!0;var e,t=Object(T.a)(v);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(!Object.prototype.hasOwnProperty.call(j,a))return!1;if(0===j[a].length)return!1}}catch(n){t.e(n)}finally{t.f()}return!0};return Object(S.jsx)("nav",{id:"sidebarMenu",className:"col-md-3 col-lg-3 d-md-block bg-light sidebar collapse",style:{overflowY:"auto"},children:Object(S.jsxs)("div",{className:"position-sticky p-3",children:[Object(S.jsx)("h4",{children:t}),Object(S.jsx)("div",{style:{padding:"0px"},children:Object(S.jsxs)("form",{children:[h,Object(S.jsxs)("div",{className:"form-group mb-3",children:[Object(S.jsxs)("button",{type:"button",className:"btn btn-success",style:{marginRight:"10px",width:"47%"},onClick:function(){return d(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a,n){var r,c,o,s,l,d;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().widgets.widgets,c=u(),t.prev=2,o={session_id:c,params:JSON.stringify(r)},s="/api/v1/execute/".concat(e),t.next=7,i.a.post(s,o);case 7:l=t.sent,d=l.data,a(A(d)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.error("Problem during notebook execution. ".concat(t.t0));case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e,a){return t.apply(this,arguments)}}()}(a))},disabled:r||!k(),children:[Object(S.jsx)("i",{className:"fa fa-play","aria-hidden":"true"})," Run"]}),Object(S.jsxs)("button",{style:{width:"47%",float:"right"},type:"button",className:"btn btn-primary",disabled:r,onClick:function(){return e="".concat(i.a.defaults.baseURL).concat(l),a="".concat(t,".html"),void i.a.get(e,{responseType:"blob"}).then((function(e){X()(e.data,a)}));var e,a},children:[Object(S.jsx)("i",{className:"fa fa-download","aria-hidden":"true"})," Download"]})]}),v&&!k()&&Object(S.jsxs)("div",{className:"alert alert-danger mb-3",role:"alert",children:[Object(S.jsx)("i",{className:"fa fa-file","aria-hidden":"true"})," Please upload all required files."]}),"Please provide title"===t&&Object(S.jsxs)("div",{className:"alert alert-warning mb-3",role:"alert",children:[Object(S.jsx)("i",{className:"fa fa-exclamation-triangle","aria-hidden":"true"})," ",Object(S.jsx)("b",{children:"Please add YAML config to your notebook as a first raw cell."}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),"Example:",Object(S.jsxs)("pre",{children:["---",Object(S.jsx)("br",{}),"title: Report title",Object(S.jsx)("br",{}),"author: Your name",Object(S.jsx)("br",{}),"description: My amazing report",Object(S.jsx)("br",{}),"---"]}),Object(S.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){return window.open("https://github.com/mljar/mercury#convert-notebook-to-web-app-with-yaml","_blank")},children:[Object(S.jsx)("i",{className:"fa fa-book","aria-hidden":"true"})," Read more"]})]}),r&&Object(S.jsxs)("div",{className:"alert alert-primary mb-3",role:"alert",children:[Object(S.jsx)("i",{className:"fa fa-cogs","aria-hidden":"true"})," Notebook is executed. Please wait."]}),s&&Object(S.jsxs)("div",{className:"alert alert-secondary mb-3",role:"alert",children:[Object(S.jsx)("i",{className:"fa fa-refresh","aria-hidden":"true"})," Notebook in watch mode. All changes to Notebook will be automatically visible in Mercury."]})]})}),Object(S.jsx)("hr",{style:{marginTop:"50px",marginBottom:"10px"}}),Object(S.jsx)("div",{children:Object(S.jsxs)("button",{className:"btn btn-sm btn-outline-danger",onClick:function(){d(function(e){return function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=u(),r="/api/v1/clear_tasks/".concat(e,"/").concat(n),t.next=5,i.a.post(r);case 5:a(A({})),R.b.success("All previous tasks deleted. The default view of the app is displayed."),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),R.b.error("Trying to clear previous tasks. The error occured. ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(a))},style:{border:"none"},disabled:r,title:"Click to clear all previous runs of the notebook",children:[Object(S.jsx)("i",{className:"fa fa-times-circle","aria-hidden":"true"})," Clear tasks"]})})]})})}function pe(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}Object(re.registerPlugin)(ie.a,se.a,de.a);var fe=a(59);function he(e){var t=e.loadingState,a=e.notebookPath,r=e.waiting,c=e.errorMsg,o=e.watchMode,s=function(){var e=Object(n.useState)(pe()),t=Object(b.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r(pe())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}().height;return Object(S.jsx)("main",{className:"col-md-9 ms-sm-auto col-lg-9",style:{paddingTop:"0px",paddingRight:"0px",paddingLeft:"0px"},children:Object(S.jsx)(fe.a,{tag:"div",blocking:r,children:Object(S.jsxs)("div",{children:["loading"===t&&!o&&Object(S.jsx)("p",{children:"Loading notebook. Please wait ..."}),"error"===t&&Object(S.jsx)("p",{children:"Problem while loading notebook. Please try again later or contact Mercury administrator."}),c&&Object(S.jsxs)("div",{className:"alert alert-danger mb-3",role:"alert",children:[Object(S.jsx)("b",{children:"Notebook is executed with errors."}),Object(S.jsx)("p",{children:c})]}),""===c&&"loading"!==t&&Object(S.jsx)("iframe",{width:"100%",height:s-58,src:"".concat(i.a.defaults.baseURL).concat(a),title:"display"},a)]})})})}var ve=Object(h.b)({name:"notebooks",initialState:{notebooks:[],loadingState:"loading",selectedNotebook:{},loadingStateSelected:"loading",watchModeCounter:0},reducers:{setNotebooks:function(e,t){e.notebooks=t.payload},setLoadingState:function(e,t){e.loadingState=t.payload},setSelectedNotebook:function(e,t){t.payload.state.startsWith("WATCH")&&e.selectedNotebook.file_updated_at===t.payload.file_updated_at||(e.selectedNotebook=t.payload),t.payload.state.startsWith("WATCH")&&(e.watchModeCounter+=1)},setLoadingStateSelected:function(e,t){e.loadingStateSelected=t.payload}}}),xe=ve.reducer,me=ve.actions,Oe=me.setNotebooks,ge=me.setLoadingState,ye=me.setSelectedNotebook,ke=me.setLoadingStateSelected,we=function(e){return e.notebooks.notebooks},Ne=function(e){return e.notebooks.loadingState},Se=function(e){return e.notebooks.selectedNotebook},Ce=function(e){return e.notebooks.loadingStateSelected},Te=function(e){return e.notebooks.watchModeCounter},Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var a=Object(f.a)(p.a.mark((function a(n){var r,c,o,s;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t||n(ke("loading")),r="/api/v1/notebooks/".concat(e),a.next=5,i.a.get(r);case 5:c=a.sent,o=c.data,s=JSON.parse(o.params),n(ye(Object(U.a)(Object(U.a)({},o),{},{params:s}))),t||n(ke("loaded")),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),t||n(ke("error")),console.error("Problem during loading selected notebook (".concat(e,"). ").concat(a.t0));case 16:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()};var Pe=Object(l.g)((function(){var e=Object(o.b)(),t=Object(l.f)().notebook_id,a=Number(t),r=Object(o.c)(Se),c=Object(o.c)(Te);return Object(n.useEffect)((function(){"WATCH_READY"!==r.state&&"WATCH_WAIT"!==r.state&&"WATCH_ERROR"!==r.state||setTimeout((function(){e(Re(a,!0)),e(F(a))}),2e3)}),[e,r,a,c]),Object(S.jsx)("div",{})}));function Me(e){var t,a=e.files,n=e.filesState,r=e.waiting,c=Object(o.b)(),s=[],l=Object(T.a)(a);try{var d=function(){var e=t.value,a=e.split("/").pop();e&&a&&s.push(Object(S.jsxs)("div",{children:[Object(S.jsx)("i",{className:"fa fa-file-text-o","aria-hidden":"true",style:{paddingRight:"5px"}})," ",Object(S.jsx)("b",{children:a}),Object(S.jsxs)("button",{style:{float:"right"},type:"button",className:"btn btn-primary",onClick:function(){return t="".concat(i.a.defaults.baseURL).concat(e),n=a,void i.a.get(t,{responseType:"blob"}).then((function(e){X()(e.data,n)}));var t,n},children:[Object(S.jsx)("i",{className:"fa fa-download","aria-hidden":"true"})," Download"]}),Object(S.jsx)("hr",{})]},e))};for(l.s();!(t=l.n()).done;)d()}catch(u){l.e(u)}finally{l.f()}return Object(S.jsxs)("main",{className:"col-md-9 ms-sm-auto col-lg-9",style:{padding:"20px"},children:[Object(S.jsxs)("div",{className:"col-8",children:[Object(S.jsxs)("h3",{style:{paddingBottom:"10px"},children:[Object(S.jsx)("i",{className:"fa fa-folder-open-o","aria-hidden":"true"})," Files view"]}),Object(S.jsx)(fe.a,{tag:"div",blocking:r,children:Object(S.jsxs)("div",{children:["loaded"===n&&s,"unknown"===n&&Object(S.jsx)("p",{children:"Please run the notebook to produce output files ..."}),"loading"===n&&Object(S.jsx)("p",{children:"Loading files please wait ..."}),"error"===n&&Object(S.jsx)("div",{className:"alert alert-danger mb-3",role:"alert",children:"There was an error during loading files. Please try to run the app again or contact the administrator."})]})})]}),Object(S.jsxs)("button",{className:"btn btn-secondary btn-sm",onClick:function(){c(O("app"))},children:[Object(S.jsx)("i",{className:"fa fa-arrow-left","aria-hidden":"true"})," Back to App"]})]})}var Ae=Object(l.g)((function(){var e,t,a=Object(o.b)(),r=Object(l.f)().notebook_id,c=Number(r),s=Object(o.c)(Se),d=Object(o.c)(Ce),j=Object(o.c)(_),h=Object(o.c)(k),v=Object(o.c)(N),x=Object(o.c)(w),m=function(){return!(!j.state||"CREATED"!==j.state)||!(!j.state||"RECEIVED"!==j.state)},O=function(){return"WATCH_READY"===s.state||"WATCH_WAIT"===s.state||"WATCH_ERROR"===s.state};Object(n.useEffect)((function(){a(Re(c)),a(F(c))}),[a,c]),Object(n.useEffect)((function(){m()&&setTimeout((function(){a(F(c))}),1e3)}),[a,j,c]),Object(n.useEffect)((function(){var e;"files"===h&&j.id&&j.state&&"DONE"===j.state&&j.result&&a((e=j.id,function(){var t=Object(f.a)(p.a.mark((function t(a){var n,r,c,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a(g("loading")),a(y([])),n=u(),r="/api/v1/output_files/".concat(n,"/").concat(e),t.next=7,i.a.get(r);case 7:c=t.sent,o=c.data,a(y(o)),a(g("loaded")),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),a(g("error")),console.error("Problem during loading output files. ".concat(t.t0));case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()))}),[a,h,j.id,j.state,j.result]);var T=s.default_view_path;j.state&&"DONE"===j.state&&j.result&&(T=j.result);var R="";return j.state&&j.result&&"ERROR"===j.state&&(R=j.result),Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(C,{showFiles:function(e){if(e)for(var t=0,a=Object.entries(e);t<a.length;t++){var n=Object(b.a)(a[t],2)[1];if("dir"===n.output)return!0}return!1}(null===s||void 0===s||null===(e=s.params)||void 0===e?void 0:e.params)}),Object(S.jsx)("div",{className:"container-fluid",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)(Pe,{}),Object(S.jsx)(je,{notebookTitle:s.title,notebookId:Number(r),loadingState:d,waiting:m(),widgetsParams:null===s||void 0===s||null===(t=s.params)||void 0===t?void 0:t.params,watchMode:O(),notebookPath:T}),"app"===h&&Object(S.jsx)(he,{loadingState:d,notebookPath:T,errorMsg:R,waiting:m(),watchMode:O()}),"files"===h&&Object(S.jsx)(Me,{files:v,filesState:x,waiting:m()})]})})]})}));function _e(){return Object(S.jsx)("header",{className:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0",children:Object(S.jsx)("img",{alt:"Mercury",src:"/static/mercury_red.svg",style:{height:"40px",marginLeft:"auto",marginRight:"auto"}})})}var Fe=Object(h.b)({name:"version",initialState:{isPro:!1,welcome:""},reducers:{setVersion:function(e,t){var a=t.payload.isPro;e.isPro=a},setWelcome:function(e,t){e.welcome=t.payload}}}),Ee=Fe.reducer,We=Fe.actions,Le=(We.setVersion,We.setWelcome),De=function(e){return e.version.welcome},ze=a(294),Ie=a(295),He=a(154),Ke=a(156),Be=Object(l.g)((function(){var e=Object(o.b)(),t=Object(o.c)(we),a=Object(o.c)(Ne),r=Object(o.c)(De);Object(n.useEffect)((function(){e(function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(ge("loading")),e.next=5,i.a.get("/api/v1/notebooks");case 5:a=e.sent,n=a.data,r=n.map((function(e){var t=JSON.parse(e.params);return Object(U.a)(Object(U.a)({},e),{},{params:t})})),t(Oe(r)),t(ge("loaded")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t(ge("error")),console.error("Problem during loading recent notebooks. ".concat(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(f.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,i.a.get("/api/v1/welcome/");case 4:a=e.sent,n=a.data,t(Le(n.msg)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Problem during loading Mercury welcome message. ".concat(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);var c=t.map((function(e,t){return Object(S.jsx)("div",{className:"col-md-4",style:{paddingBottom:"20px"},children:Object(S.jsxs)("div",{className:"card",children:[Object(S.jsx)("div",{style:{height:"200px",width:"100%",padding:"1px",overflow:"hidden"},children:Object(S.jsx)("iframe",{className:"thumbnailIframe",width:"200%",height:800,src:"".concat(i.a.defaults.baseURL).concat(e.default_view_path),title:"display",scrolling:"no"})}),Object(S.jsx)("hr",{}),Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsx)("h5",{className:"card-title",children:e.title}),Object(S.jsx)("p",{className:"card-text",children:e.params.description}),Object(S.jsxs)("a",{href:"/app/".concat(e.id),className:"btn btn-primary",children:["Open ",Object(S.jsx)("i",{className:"fa fa-arrow-right","aria-hidden":"true"})]})]})]})},"notebook-".concat(e.id,"}"))}));return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(_e,{}),Object(S.jsxs)("div",{className:"container",style:{paddingBottom:"50px"},children:[""===r&&Object(S.jsx)("h1",{style:{padding:"30px",textAlign:"center"},children:"Welcome!"}),""!==r&&Object(S.jsx)("div",{style:{paddingTop:"20px",paddingBottom:"10px"},children:Object(S.jsx)(ze.a,{rehypePlugins:[He.a,Ie.a,Ke.a],children:r})}),Object(S.jsxs)("div",{className:"row",children:["loading"===a&&Object(S.jsx)("p",{children:"Loading notebooks. Please wait ..."}),"loaded"===a&&0===t.length&&Object(S.jsxs)("div",{children:[Object(S.jsx)("p",{children:"There are no notebooks available. Please add notebook to Mercury server."}),Object(S.jsx)("p",{children:"Command to watch notebook development in Mercury (with automatic refresh):"}),Object(S.jsx)("div",{className:"alert alert-primary",role:"alert",children:Object(S.jsxs)("pre",{style:{margin:"0px"},children:["mercury watch ","<path_to_notebook>"]})}),Object(S.jsx)("p",{children:"Command to add notebook to your Mercury server:"}),Object(S.jsx)("div",{className:"alert alert-primary",role:"alert",children:Object(S.jsxs)("pre",{style:{margin:"0px"},children:["mercury add ","<path_to_notebook>"]})})]}),"error"===a&&Object(S.jsx)("p",{children:"Problem while loading notebooks. Please try again later or contact Mercury administrator."}),c]})]}),Object(S.jsx)("footer",{className:"footer",style:{position:"absolute",bottom:"0",width:"100%",height:"40px",lineHeight:"40px",backgroundColor:"#f5f5f5"},children:Object(S.jsxs)("div",{className:"container",children:[Object(S.jsxs)("span",{className:"text-muted",children:["Mercury \xa9"," ",Object(S.jsx)("a",{style:{textDecoration:"none"},href:"https://mljar.com",target:"_blank",rel:"noreferrer",children:"MLJAR Sp. z o.o."})]}),Object(S.jsx)("span",{className:"text-muted",style:{float:"right"},children:Object(S.jsx)("a",{style:{textDecoration:"none"},href:"https://mljar.com/pricing",target:"_blank",rel:"noreferrer",children:"Check Mercury Pro"})})]})})]})}));function Ue(e){var t=e.children;return Object(S.jsx)(S.Fragment,{children:t})}function Ve(){return Object(n.useEffect)((function(){u()}),[]),Object(S.jsx)(Ue,{children:Object(S.jsxs)(l.c,{children:[Object(S.jsx)(l.a,{exact:!0,path:"/",component:Be}),Object(S.jsx)(l.a,{exact:!0,path:"/app/:notebook_id/",component:Ae})]})})}var Je=function(e){var t=e.store;e.history;return Object(S.jsx)(o.a,{store:t,children:Object(S.jsx)(s.a,{children:Object(S.jsx)(Ve,{})})})},Ye=a(11),qe=a(153),Ge=a(22);var Qe,Xe=Object(qe.a)(),Ze=Object(Ge.b)({notebooks:xe,tasks:M,widgets:W,version:Ee,app:x}),$e=Object(Ye.a)(Object(h.c)()),et=(a(266),a(267),a(272),a(273),a(274),a(275),a(276),a(277),Object(h.a)({reducer:Ze,middleware:$e,preloadedState:Qe}));"http://localhost:3000"===window.location.origin?i.a.defaults.baseURL="http://127.0.0.1:8000":i.a.defaults.baseURL=window.location.origin,document.addEventListener("DOMContentLoaded",(function(){return Object(r.render)(Object(S.jsxs)("div",{children:[Object(S.jsx)(Je,{store:et,history:Xe}),Object(S.jsx)(R.a,{position:"bottom-right",autoClose:3e3,hideProgressBar:!0,newestOnTop:!0,closeOnClick:!0,pauseOnHover:!0})]}),document.getElementById("root"))}))}},[[279,1,2]]]);
//# sourceMappingURL=main.20a12257.chunk.js.map