(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{881:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(1644)}])},2569:function(e,r,n){"use strict";n.d(r,{l:function(){return s}});var t=n(5893),s=function(e){var r=e.children,n=e.onSubmit;return(0,t.jsx)("form",{className:"grid gap-2 p-5",onSubmit:n,noValidate:!0,children:r})}},1656:function(e,r,n){"use strict";n.d(r,{_:function(){return s}});var t=n(5893),s=function(e){var r=e.children,n=e.htmlFor,s=e.onClick;return(0,t.jsx)("label",{htmlFor:n,onClick:s,className:"block font-medium text-gray-700",children:r})}},5146:function(e,r,n){"use strict";n.d(r,{x:function(){return o}});var t=n(5893),s=n(9604),a=n(7294),o=function(e){var r,n=e.data,o=e.path,l=(0,a.useState)(null),i=l[0],u=l[1],d=(0,a.useState)((function(){return null!==(r=localStorage.getItem("editorFoldLevel"))&&void 0!==r?r:"4"})),c=d[0],f=d[1];(0,a.useEffect)((function(){i&&(localStorage.setItem("editorFoldLevel",c),i.trigger("unfold","editor.unfoldAll",{}),"unfold"!==c&&("1"===c?i.trigger("fold","editor.foldAll",{}):i.trigger("fold","editor.foldLevel".concat(c),{})))}),[c,i]);var p=(0,a.useMemo)((function(){return n.length?JSON.stringify(n,null,2):null}),[n]);return p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("label",{className:"text-xs",children:["Folding:"," ",(0,t.jsxs)("select",{className:"focus:ring-blue-500 focus:border-blue-500 shadow-sm border border-gray-300 rounded-md p-0.5 text-xs",onChange:function(e){var r=e.currentTarget.value;f(r)},value:c,children:[(0,t.jsx)("option",{value:"1",children:"1"}),(0,t.jsx)("option",{value:"2",children:"2"}),(0,t.jsx)("option",{value:"3",children:"3"}),(0,t.jsx)("option",{value:"4",children:"4"}),(0,t.jsx)("option",{value:"5",children:"5"}),(0,t.jsx)("option",{value:"6",children:"6"}),(0,t.jsx)("option",{value:"7",children:"7"}),(0,t.jsx)("option",{value:"unfold",children:"Unfold All"})]})]})}),(0,t.jsx)(s.ZP,{path:o,height:600,defaultLanguage:"json",value:p,options:{scrollBeyondLastLine:!1,readOnly:!0,minimap:{enabled:!1},unusualLineTerminators:"auto"},onMount:function(e,r){u(e);var n=e.getContribution("editor.contrib.messageController");e.onDidAttemptReadOnlyEdit((function(){return n.dispose()}))}})]}):(0,t.jsx)("div",{className:"p-5 shadow-inner",children:(0,t.jsx)("p",{children:"No result."})})}},9158:function(e,r,n){"use strict";n.d(r,{U:function(){return o}});var t=n(1163),s=n(7563),a=n(7294);function o(e){var r=(0,t.useRouter)().asPath.split("?")[1];return(0,a.useMemo)((function(){var n=s.parse(r,{parseBooleans:!0,parseNumbers:!0}),t={};return Object.keys(e).forEach((function(r){var s;t[r]=null!==(s=n[r])&&void 0!==s?s:e[r]})),t}),[r])}},6969:function(e,r,n){"use strict";n.d(r,{q:function(){return s}});var t=n(7294);function s(){var e=(0,t.useState)(""),r=e[0],n=e[1];return{props:(0,t.useMemo)((function(){return{type:"submit",className:"".concat(r," border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 p-2"),onAnimationEnd:function(){return n("")}}}),[r]),onError:(0,t.useCallback)((function(){return n("animate-wiggle")}),[])}}},1644:function(e,r,n){"use strict";n.r(r);var t=n(5893),s=n(5496),a=n(9604),o=n(9008),l=n(1163),i=n(7294),u=n(7536),d=n(4231),c=n(7563),f=n(6616),p=n(2569),m=n(1656),h=n(5146),g=n(2354),b=n(4937),x=n(9158),y=n(6969),v=n(1815);function j(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function N(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function w(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){N(e,r,n[r])}))}return e}function R(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return j(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=d.Ry({header:d.Z_().defined(),payload:d.Z_().defined(),skipResults:d.Rx().transform((function(e,r){return""===r?void 0:e})).typeError("Results to Skip must be a number").required().integer().min(0),maxResults:d.Rx().transform((function(e,r){return""===r?void 0:e})).typeError("Max. Results must be a number").required().integer().min(1).max(1e3),decrypt:d.O7().defined()}).required(),k={header:"{}",payload:"{}",skipResults:0,maxResults:20,decrypt:!1};function A(e){var r=e.label,n=e.control,s=e.name,o=(0,i.useState)(null),d=o[0],c=o[1],f=(0,l.useRouter)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m._,{onClick:function(){return null===d||void 0===d?void 0:d.focus()},children:r}),(0,t.jsx)(u.Qr,{render:function(e){var r,n=e.field,o=(null!==(r=n.value.match(/\n/g))&&void 0!==r?r:[]).length+1,l=18*(f.isReady?o:1)+10;return(0,t.jsx)("div",{className:"focus:ring-blue-500 focus:border-blue-500 w-full shadow-sm border border-gray-300 rounded-md p-1",style:{height:l},children:(0,t.jsx)(a.ZP,{loading:(0,t.jsx)("p",{className:"w-full",style:{paddingLeft:"26px"},children:"Loading..."}),path:"".concat(s,".json"),defaultLanguage:"json",value:n.value,onChange:function(e){n.onChange({target:{value:null!==e&&void 0!==e?e:""}})},options:{lineNumbers:"off",scrollBeyondLastLine:!1,minimap:{enabled:!1},overviewRulerLanes:0,renderLineHighlight:"none"},onMount:function(e,r){c(e)}})})},control:n,name:s})]})}r.default=function(){var e=(0,x.U)(k);(0,i.useEffect)((function(){var r=c.stringify({hq:e.header,pq:e.payload,skip:e.skipResults,limit:e.maxResults,decrypt:e.decrypt});O.execute("/api/search?".concat(r),{headers:{Accept:"application/json"}})}),[e]);var r=(0,u.cI)({resolver:(0,s.X)(S),defaultValues:e}),n=r.register,a=r.handleSubmit,d=r.formState.errors,j=r.control,N=r.setValue,E=r.getValues,O=(0,b.i)(),_=(0,b.i)(),I=(0,y.q)(),L=(0,l.useRouter)(),F=a((function(e){L.push({pathname:"/search",query:e})}),(function(e){I.onError()}));(0,i.useEffect)((function(){return v.Y.onFocusAggId=function(e){N("payload","{}"),N("header",JSON.stringify({aggIds:[e]},null,2)),F()},function(){delete v.Y.onFocusAggId}}),[]),(0,i.useEffect)((function(){return v.Y.onMergeAggId=function(e){N("payload","{}");var r=JSON.parse(E("header")),n="object"===typeof r&&null!==r&&!Array.isArray(r);N("header",JSON.stringify(n?w({},r,{aggIds:Array.isArray(r.aggIds)?R(r.aggIds).concat([e]):[e]}):{aggIds:["${aggId}"]},null,2)),F()},function(){delete v.Y.onMergeAggId}}),[]),(0,i.useEffect)((function(){_.execute("/api/features",{headers:{Accept:"application/json"}})}),[]);var C={paddingLeft:"26px"},P={height:"28px"};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.default,{children:(0,t.jsx)("title",{children:"Search"})}),(0,t.jsx)(g.D,{children:"Search"}),(0,t.jsxs)(f.Z,{children:[(0,t.jsxs)(p.l,{onSubmit:F,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(A,{label:"Header Query",control:j,name:"header"}),d.header&&(0,t.jsxs)("p",{className:"text-sm text-red-500",children:["\u26a0 ",d.header.message]})]}),!_.data||_.data.payload_queries||_.loading?(0,t.jsxs)("div",{children:[(0,t.jsx)(A,{label:"Payload Query",control:j,name:"payload"}),d.payload&&(0,t.jsxs)("p",{className:"text-sm text-red-500",children:["\u26a0 ",d.payload.message]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)(m._,{children:"Payload Query"}),(0,t.jsx)("input",{style:w({},P,C),type:"text",className:"cursor-not-allowed disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none bg-gray-100 focus:ring-blue-500 focus:border-blue-500 w-full shadow-sm border border-gray-300 rounded-md p-1",defaultValue:"Payload Queries have been disabled for this instance of Fact Explorer.",disabled:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m._,{htmlFor:"skipResults",children:"Number of Results to Skip"}),(0,t.jsx)("input",w({style:w({},P,C),id:"skipResults",type:"number",className:" focus:ring-blue-500 focus:border-blue-500 w-full shadow-sm border border-gray-300 rounded-md p-1"},n("skipResults"))),d.skipResults&&(0,t.jsxs)("p",{className:"text-sm text-red-500",children:["\u26a0 ",d.skipResults.message]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(m._,{htmlFor:"maxResults",children:"Max. Results to Return"}),(0,t.jsx)("input",w({id:"maxResults",type:"number",style:w({},P,C),className:" focus:ring-blue-500 focus:border-blue-500 w-full shadow-sm border border-gray-300 rounded-md p-1"},n("maxResults"))),d.maxResults&&(0,t.jsxs)("p",{className:"text-sm text-red-500",children:["\u26a0 ",d.maxResults.message]})]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",w({type:"checkbox"},n("decrypt")))," Decrypt Result"]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("button",w({},I.props,{children:"Get Events"}))})]}),O.loading?(0,t.jsxs)("div",{className:"p-5 shadow-inner",children:[(0,t.jsx)("span",{className:"inline-block animate-spin",children:"\u21bb"})," Loading..."]}):O.data?(0,t.jsx)(h.x,{data:O.data,path:"result/search.json"}):null]})]})}},1815:function(e,r,n){"use strict";n.d(r,{Y:function(){return t}});var t={}}},function(e){e.O(0,[626,978,774,888,179],(function(){return r=881,e(e.s=r);var r}));var r=e.O();_N_E=r}]);