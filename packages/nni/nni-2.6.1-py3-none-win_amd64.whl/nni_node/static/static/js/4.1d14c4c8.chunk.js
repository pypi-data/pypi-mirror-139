"use strict";(self.webpackChunknni_webui=self.webpackChunknni_webui||[]).push([[4],{5004:function(e,t,s){s.r(t),s.d(t,{default:function(){return A}});var a=s(16449),n=s(87578),r=s(53102),i=s(12220),o=s(89623),l=s(37130),c=s(41772),m=s(4671);class d{experimentList=[];platform=[];errorMessage="";getExperimentList(){return this.experimentList}getPlatformList(){return this.platform}getExpErrorMessage(){return this.errorMessage}async init(){await(0,m.b6)(`${c.zU}/experiments-info`).then((e=>{const t=new Set;for(const s of e)void 0!==s.port&&"string"===typeof s.port&&(s.port=JSON.parse(s.port)),t.add(s.platform);this.experimentList=e.sort(((e,t)=>t.startTime-e.startTime)),this.platform=Array.from(t)})).catch((e=>{this.errorMessage=e.message}))}}var u=s(86151);function h(e,t){return void 0!==e&&void 0!==t&&e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}const p=(e,t,s)=>"string"===typeof e&&""!==e?s.filter((s=>s[t]===e)):Array.isArray(e)&&0!==e.length?s.filter((s=>e.includes(s[t]))):s;function f(e){return e.map((e=>({key:e,text:e})))}function S(e,t){return(0,m.Lc)(e,t.field,t.isDescend)}const E=180,g=139;var C=s(59655),N=s(13994),k=s(10046),v=s(34023),b=s(11886),y=s(40236);const D=()=>a.createElement("div",{className:"header"},a.createElement("div",{className:"headerCon"},a.createElement(n.K,{className:"nav",horizontal:!0},a.createElement(N.v,{grow:30,styles:{root:{minWidth:300,display:"flex",verticalAlign:"center"}}},a.createElement("span",{className:"desktop-logo"},b.qo),a.createElement("span",{className:"logoTitle"},"Neural Network Intelligence")),a.createElement(N.v,{grow:70,className:"navOptions"},a.createElement(n.K,{horizontal:!0,horizontalAlign:"end",tokens:y.C,styles:y.u},a.createElement(C.rU,{to:"/oview",className:"experiment"},a.createElement(k.Q,{iconProps:v.We,text:"Back to the experiment"})))))));var x=s(67131);class w extends a.Component{constructor(e){super(e)}render(){const{port:e,id:t,status:s}=this.props,r=window.location.hostname,i=`${window.location.protocol}//${r}:${e}/oview`;return a.createElement(n.K,{horizontal:!0,className:"ellipsis idCopy"},"STOPPED"===s?a.createElement("div",{className:"idColor"},t):a.createElement("a",{href:i,className:"link toAnotherExp idColor",target:"_blank",rel:"noopener noreferrer"},t),a.createElement(x.Z,{value:t}))}}var P=w,L=s(87735),T=s(69713),R=s(57764);class M extends a.Component{constructor(e){super(e)}render(){const{platform:e,selectedStatus:t,selectedPlatform:s,selectedStartDate:n,selectedEndDate:r,selectStatus:l,selectPlatform:m,getSelectedData:d,setSearchSource:u}=this.props;return a.createElement(a.Fragment,null,a.createElement(L.L,{label:"Status",selectedKeys:t,multiSelect:!0,onChange:l.bind(this),placeholder:"Select an option",options:f(c.hh),className:"filter-condition-status"}),a.createElement(L.L,{label:"Platform",selectedKey:s,onChange:m.bind(this),placeholder:"Select an option",options:f(e),className:"filter-condition-platform"}),a.createElement(T.M,{label:"Start time",firstDayOfWeek:R.eO.Sunday,showMonthPickerAsOverlay:!0,placeholder:"Select a date...",ariaLabel:"Select a date",value:n,onSelectDate:d.bind(this,"start")}),a.createElement(T.M,{label:"End time",firstDayOfWeek:R.eO.Sunday,showMonthPickerAsOverlay:!0,placeholder:"Select a date...",ariaLabel:"Select a date",value:r,onSelectDate:d.bind(this,"end")}),a.createElement(i.a,{onClick:u.bind(this),className:"reset"},a.createElement(o.J,{iconName:"Refresh"}),a.createElement("span",{className:"margin"},"Reset")))}}var W=M,z=s(60545),I=s(71888);s(72093),s(16877),s(42558),s(35931),s(49330);const O={childrenGap:25};class K extends a.Component{constructor(e){super(e),this.state={platform:[],columns:this.columns,errorMessage:"",hideFilter:!0,searchInputVal:"",selectedStatus:[],selectedPlatform:"",source:[],originExperimentList:[],searchSource:[],sortInfo:{field:"",isDescend:!1}}}async componentDidMount(){const e=new d;await e.init();const t=e.getExperimentList();this.setState((()=>({source:t,originExperimentList:t,searchSource:t,platform:e.getPlatformList(),errorMessage:e.getExpErrorMessage()})))}render(){const{platform:e,hideFilter:t,selectedStatus:s,source:c,selectedPlatform:m,selectedStartDate:d,selectedEndDate:h,errorMessage:p}=this.state;return a.createElement(n.K,{className:"nni",style:{minHeight:window.innerHeight}},a.createElement(D,null),void 0!==p?a.createElement("div",{className:"warning"},a.createElement(u.Z,{info:p,typeInfo:"error"})):null,a.createElement(n.K,{className:"contentBox expBackground"},a.createElement(n.K,{className:"content",styles:{root:{minHeight:window.innerHeight-104}}},a.createElement(n.K,{className:"experimentList"},a.createElement(z.b.Provider,{value:{text:"All experiments",icon:"CustomList"}},a.createElement(I.D,null)),a.createElement(n.K,{className:"box",horizontal:!0},a.createElement("div",{className:"search"},a.createElement(r.R,{className:"search-input",placeholder:"Search the experiment by name or ID",onEscape:this.setOriginSource.bind(this),onClear:this.setOriginSource.bind(this),onChange:this.searchNameAndId.bind(this)})),a.createElement("div",{className:"filter"},a.createElement(i.a,{onClick:this.clickFilter.bind(this),className:`${t?null:"filter-button-open"}`},a.createElement(o.J,{iconName:"Equalizer"}),a.createElement("span",{className:"margin"},"Filter")))),a.createElement(n.K,{className:(t?"hidden":"")+" filter-condition",horizontal:!0,tokens:O},a.createElement(W,{platform:e,selectedStatus:s,selectedPlatform:m,selectedStartDate:d,selectedEndDate:h,selectStatus:this.selectStatus.bind(this),selectPlatform:this.selectPlatform.bind(this),getSelectedData:this.getSelectedData.bind(this),setSearchSource:this.setSearchSource.bind(this)})),a.createElement(l.W,{columns:this.columns,items:c,setKey:"set",compact:!0,selectionMode:0,className:"table"})))))}onColumnClick=(e,t)=>{const{columns:s,source:a}=this.state,n=s.slice(),r=n.filter((e=>t.key===e.key))[0];n.forEach((e=>{e===r?(r.isSortedDescending=!r.isSortedDescending,r.isSorted=!0):(e.isSorted=!1,e.isSortedDescending=!0)}));const i=(0,m.Lc)(a,r.fieldName,r.isSortedDescending);this.setState((()=>({columns:n,source:i,sortInfo:{field:r.fieldName,isDescend:r.isSortedDescending}})))};columns=[{name:"Name",key:"experimentName",fieldName:"experimentName",minWidth:g,maxWidth:E,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>a.createElement("div",null,e.experimentName)},{name:"ID",key:"id",fieldName:"id",minWidth:g,maxWidth:E,isResizable:!0,className:"tableHead leftTitle",data:"string",onColumnClick:this.onColumnClick,onRender:e=>a.createElement(P,{port:e.port,status:e.status,id:e.id})},{name:"Status",key:"status",fieldName:"status",minWidth:g,maxWidth:E,isResizable:!0,onColumnClick:this.onColumnClick,onRender:e=>a.createElement("div",{className:`${e.status} commonStyle`},e.status)},{name:"Port",key:"port",fieldName:"port",minWidth:124,maxWidth:150,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>a.createElement("div",{className:"STOPPED"===e.status?"gray-port":""},void 0!==e.port?e.port:"--")},{name:"Platform",key:"platform",fieldName:"platform",minWidth:124,maxWidth:150,isResizable:!0,data:"string",onColumnClick:this.onColumnClick,onRender:e=>a.createElement("div",{className:"commonStyle"},e.platform)},{name:"Start time",key:"startTime",fieldName:"startTime",minWidth:154,maxWidth:210,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>a.createElement("div",null,(0,m.ZU)(e.startTime))},{name:"End time",key:"endTime",fieldName:"endTime",minWidth:154,maxWidth:210,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>a.createElement("div",null,(0,m.ZU)(e.endTime))}];clickFilter(e){const{hideFilter:t}=this.state;!0===!t&&this.setSearchSource(),this.setState((()=>({hideFilter:!t})))}setOriginSource(){let{originExperimentList:e}=this.state;const{sortInfo:t}=this.state;if(void 0!==e){e=this.commonSelectString(e,"");const s=S(e,t);this.setState((()=>({source:s})))}}searchNameAndId(e,t){const{originExperimentList:s,sortInfo:a}=this.state;if(void 0!==t){if(""===t)this.setOriginSource();else{const e=t.trim();let n=s.filter((t=>t.experimentName.toLowerCase().includes(e.toLowerCase())||t.id.toLowerCase().includes(e.toLowerCase())));n=this.commonSelectString(n,"");const r=S(n,a);this.setState((()=>({source:r,searchSource:r})))}this.setState((()=>({searchInputVal:t.trim()})))}}commonSelectString=(e,t)=>{const{selectedStatus:s,selectedPlatform:a,selectedStartDate:n,selectedEndDate:r}=this.state;return"status"===t&&(e=p(a,"platform",e)),"platform"===t&&(e=p(s,"status",e)),""===t&&(e=Array.from(new Set([...p(a,"platform",e),...p(s,"status",e)]))),e=e.filter((e=>(void 0===n||h(new Date(e.startTime),n))&&(void 0===r||h(new Date(e.endTime),r))))};selectStatus=(e,t)=>{if(void 0!==t){const{searchSource:e,sortInfo:s,selectedStatus:a}=this.state,n=t.selected?[...a,t.key]:a.filter((e=>e!==t.key));let r=p(n,"status",e);r=this.commonSelectString(r,"status"),this.setState({selectedStatus:n,source:S(r,s)})}};selectPlatform=(e,t)=>{if(void 0!==t){const{searchSource:e,sortInfo:s}=this.state;let a=p(t.key,"platform",e);a=this.commonSelectString(a,"platform"),this.setState({selectedPlatform:t.key,source:S(a,s)})}};getSelectedData(e,t){if(null!==t&&void 0!==t){const{selectedStatus:s,selectedPlatform:a,selectedStartDate:n,selectedEndDate:r,searchSource:i,sortInfo:o}=this.state,l=""!==a;let c=p(s,"status",i);l&&(c=c.filter((e=>e.platform===a))),"start"===e?(c=c.filter((e=>h(new Date(e.startTime),t)&&(void 0===r||h(new Date(e.endTime),r)))),this.setState((()=>({source:S(c,o),selectedStartDate:t})))):(c=c.filter((e=>h(new Date(e.endTime),t)&&(void 0===n||h(new Date(e.startTime),n)))),this.setState((()=>({source:S(c,o),selectedEndDate:t}))))}}setSearchSource(){const{sortInfo:e,originExperimentList:t}=this.state;let{searchInputVal:s}=this.state;s=s.trim();const a=t.filter((e=>e.experimentName.toLowerCase().includes(s.toLowerCase())||e.id.toLowerCase().includes(s.toLowerCase())));this.setState((()=>({source:S(a,e),selectedStatus:[],selectedPlatform:"",selectedStartDate:void 0,selectedEndDate:void 0})))}}var A=K},71888:function(e,t,s){s.d(t,{D:function(){return l}});var a=s(16449),n=s(49627),r=s(87578),i=s(89623),o=s(60545);s(51864);(0,n.l)();const l=()=>a.createElement(o.b.Consumer,null,(e=>a.createElement(r.K,{horizontal:!0,className:"panelTitle"},a.createElement(i.J,{iconName:e.icon}),a.createElement("span",null,e.text))))},60545:function(e,t,s){s.d(t,{b:function(){return a}});const a=s(16449).createContext({text:"",icon:""})},67131:function(e,t,s){var a=s(16449),n=s(97391),r=s.n(n),i=s(4512),o=s.n(i),l=s(22379),c=s(93272),m=s(63700),d=s(41772);const u=({value:e,hideTooltip:t})=>{const s=(0,a.useRef)(null);return a.createElement("div",null,a.createElement(l.h,{iconProps:{iconName:"Copy"},styles:{icon:[{fontSize:c.TS.small}]},onClick:t=>{t.stopPropagation(),o()(e),s.current&&s.current.show(),setTimeout((()=>{null!==s.current&&s.current.dismiss()}),1e3)},onMouseDown:e=>{e.stopPropagation()},onMouseUp:e=>{e.stopPropagation()}}),a.createElement(m.G,{hidden:t,content:"Copied",componentRef:s,delay:0,tooltipProps:{calloutProps:{styles:{beak:{background:d.he},beakCurtain:{background:d.he},calloutMain:{background:d.he}}}}}))};u.propTypes={value:r().string.isRequired,hideTooltip:r().bool},t.Z=u},49330:function(){},51864:function(){},35931:function(){}}]);
//# sourceMappingURL=4.1d14c4c8.chunk.js.map