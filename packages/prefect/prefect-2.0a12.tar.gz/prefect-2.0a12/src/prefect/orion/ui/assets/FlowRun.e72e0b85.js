import{_ as z,u as D,A as p,E as b,m as B}from"./index.ca42c5fd.js";import{u as E,U as S,G as g,P as f,av as T,v as o,aw as W,W as M,aj as U,r as R,o as i,c as _,d as m,a as C,A as s,F as G,x as L,B as $,w as H,ax as J,y as v,z as K,M as P}from"./vendor.d790ce30.js";const O={key:0,class:"text-truncate d-flex align-center"},Q={class:"ml-5"},X=P(" Flow Version: "),Y={class:"font-weight-semibold"},Z=P(" Copy Run ID "),ee=E({async setup(te){let r,w;const h=D(),t=S(),k=g(null),a=g(t==null?void 0:t.params.id),F=f(t,()=>{a.value=t==null?void 0:t.params.id});T(()=>{F()});const j=o(()=>{var e;return(e=n.value.flow_version)!=null?e:"--"}),q=o(()=>({id:a.value})),l=([r,w]=W(()=>p.query({endpoint:b.flow_run,body:q,options:{pollInterval:5e3}}).fetch()),r=await r,w(),r),A=o(()=>({id:l.response.value.flow_id})),y={flow:p.query({endpoint:b.flow,body:A})},V=o(()=>{var e;return((e=y.flow.response)==null?void 0:e.value)||{}}),n=o(()=>{var e;return((e=l.response)==null?void 0:e.value)||{}}),I=o(()=>{var c,x;const e=[{text:(c=V.value)==null?void 0:c.name},{text:(x=n.value)==null?void 0:x.name,to:""}],d=t.fullPath.includes("/timeline"),u=t.fullPath.includes("/radar");return(d||u)&&(e[1].to=`/flow-run/${a.value}`,d&&e.push({text:"Timeline"}),u&&e.push({text:"Radar"})),e});M(()=>{l.stopPolling(),p.queries.delete(l.id)}),U(()=>{var e;k.value=((e=t.hash)==null?void 0:e.substr(1))||"task_runs"}),f(a,()=>{!a.value||y.flow.fetch()});const N=f(()=>n.value,()=>{n.value.name&&h.all.length==0&&(h.replaceAll([{object:"flow_run",property:"name",type:"string",operation:"equals",value:n.value.name}]),N())});return(e,d)=>{const u=R("bread-crumbs"),c=R("router-view");return i(),_("div",null,[m("div",{class:K(["d-flex align-center justify-space-between mb-2 py-1 position-relative z-1",{blur:s(t).fullPath.includes("/radar")}])},[C(u,{class:"flex-grow-1",crumbs:s(I),icon:"pi-flow-run"},null,8,["crumbs"]),s(t).fullPath.includes("/radar")?(i(),_(G,{key:0},[s(B).sm?(i(),_("div",O,[m("span",Q,[X,m("span",Y,L(s(j)),1)]),s(B).md?(i(),$(s(J),{key:0,class:"ml-1",value:a.value,toast:"Run ID was copied to clipboard"},{default:H(()=>[Z]),_:1},8,["value"])):v("",!0)])):v("",!0)],64)):v("",!0)],2),C(c)])}}});var oe=z(ee,[["__scopeId","data-v-2e159528"]]);export{oe as default};
