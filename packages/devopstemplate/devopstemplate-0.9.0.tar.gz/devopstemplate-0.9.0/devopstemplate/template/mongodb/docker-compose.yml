version: "3"

services:
    mongo:
        # starts the container mongo with the image mongo:latest
        # --> use a specific version tag in production environments
        image: mongo
        # YAML interprets xx:yy as base 60 values
        # --> always specify port definitions as string
        # (see https://github.com/go-yaml/yaml/issues/34)
        #
        # Comment the port definition in order restrict mongodb access to
        # containers connected to the Docker network mongo_net
        ports:
            - "127.0.0.1:27017-27019:27017-27019"
        networks:
            - net
        # Store mongo db contents outside of the container
        volumes:
            - data:/data/db
        # Wait for 30 sec before killing the container
        # --> allows for a save shutdown
        stop_grace_period: 30s


# Note that auto-generated networks/volumes will be prefixed with the project
# name, e.g., <project>_net, if the project name is '<project>'.
# By default the project name is the name of the current directory or it can
# be specified via command-line parameter (-p) or with an environment variable
# (COMPOSE_PROJECT_NAME)

networks:
    net:

volumes:
    data: