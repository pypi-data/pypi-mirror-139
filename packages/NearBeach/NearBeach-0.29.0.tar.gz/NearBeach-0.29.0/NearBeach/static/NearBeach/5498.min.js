"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[5498],{5511:(e,a,o)=>{o.d(a,{Z:()=>M});var t=o(6252),i=o(3577);const n={class:"row"},s={class:"col-md-4"},l=(0,t._)("strong",null,"Between Dates",-1),r={class:"text-instructions"},d={class:"col-md-4"},c={class:"form-group"},u={key:0,class:"error"},g={class:"col-md-4"},m={class:"form-group"},h={key:0,class:"error"};var p=o(8288),f=o(3766),_=o(2587);const v={name:"BetweenDates",setup:()=>({v$:(0,f.ZP)()}),components:{NDatePicker:p.Z},props:{destination:{type:String,default:""},endDateModel:{type:Number,default:()=>{let e=new Date;return e.setHours(16),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),new Date(e.setDate(e.getDate()+14)),e.getTime()}},startDateModel:{type:Number,default:()=>{let e=new Date;return e.setHours(9),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()}}},validations:{localEndDateModel:{required:_.C1},localStartDateModel:{required:_.C1}},data(){return{localEndDateModel:this.endDateModel,localStartDateModel:this.startDateModel}},methods:{emitDates:function(){this.$emit("update_dates",{start_date:this.localStartDateModel,end_date:this.localEndDateModel})}},watch:{localEndDateModel:function(){this.localEndDateModel<this.localStartDateModel&&(this.localEndDateModel=this.localStartDateModel()),this.emitDates()},localStartDateModel:function(){this.localEndDateModel<this.localStartDateModel&&(this.localStartDateModel=this.localEndDateModel()),this.emitDates()}}},M=(0,o(3744).Z)(v,[["render",function(e,a,o,p,f,_){const v=(0,t.up)("n-date-picker");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t._)("div",s,[l,(0,t._)("p",r," Choose the start and end date of the "+(0,i.toDisplayString)(o.destination)+". Please note the end date can not be earlier than the start date. They can be equal. ",1)]),(0,t._)("div",d,[(0,t._)("div",c,[(0,t._)("label",null,[(0,t.Uk)((0,i.toDisplayString)(o.destination)+" Start Date: ",1),!p.v$.localStartDateModel.$error.length>0?((0,t.wg)(),(0,t.iD)("span",u," Please select a date.")):(0,t.kq)("v-if",!0)]),(0,t.Wm)(v,{type:"datetime",value:f.localStartDateModel,"onUpdate:value":a[0]||(a[0]=e=>f.localStartDateModel=e),class:"form-control"},null,8,["value"])])]),(0,t._)("div",g,[(0,t._)("div",m,[(0,t._)("label",null,[(0,t.Uk)((0,i.toDisplayString)(o.destination)+" End Date: ",1),!p.v$.localEndDateModel.$error.length>0?((0,t.wg)(),(0,t.iD)("span",h," Please select a date.")):(0,t.kq)("v-if",!0)]),(0,t.Wm)(v,{type:"datetime",value:f.localEndDateModel,"onUpdate:value":a[1]||(a[1]=e=>f.localEndDateModel=e),class:"form-control"},null,8,["value"])])])])}]])},8734:(e,a,o)=>{o.d(a,{Z:()=>de});var t=o(6252);const i={class:"row"},n={class:"col-md-4"},s=(0,t._)("h2",null,"Stakeholder Organisation",-1),l=(0,t._)("p",{class:"text-instructions"}," Please search for your stakeholder's organisation in the dropdown box. Once found, please select. ",-1),r={class:"text-instructions"},d=(0,t.Uk)(" If you can not find your organisation, please "),c={class:"col-md-8"},u={class:"form-group"},g=(0,t.Uk)("Stakeholder Organisation "),m={key:0,class:"error"};var h=o(5169),p=o(967),f=o(9963);const _={class:"modal fade",id:"newOrganisationModal",tabindex:"-1","aria-labelledby":"newOrganisationModalLabel","aria-hidden":"true"},v={class:"modal-dialog modal-lg"},M={class:"modal-content"},k=(0,t._)("div",{class:"modal-header"},[(0,t._)("h5",{class:"modal-title",id:"newOrganisationModalLabel"}," New Organisation "),(0,t._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newOrganisationModalCloseButton"})],-1),w={class:"modal-body"},y={class:"row"},D=(0,t._)("div",{class:"col-md-4"},[(0,t._)("strong",null,"Description"),(0,t._)("p",{class:"text-instructions"}," Please fill out all the required fields. Please only use a generic email for the organisation email field. e.g. support@companyxyz.com ")],-1),S={class:"col-md-8"},b={class:"form-group"},O={for:"id_organisation_name"},I=(0,t.Uk)(" Organisation Name: "),E={key:0,class:"error"},Z=(0,t._)("br",null,null,-1),U={class:"row"},T={class:"form-group col-md-6"},$={for:"id_organisation_website"},q=(0,t.Uk)(" Organisation Website: "),N={key:0,class:"error"},x={key:1,class:"error"},C={class:"form-group col-md-6"},L={for:"id_organisation_email"},P=(0,t.Uk)(" Organisation Email: "),A={key:0,class:"error"},B={key:1,class:"error"},R=(0,t._)("hr",null,null,-1),W={key:0,class:"row submit-row"},G={class:"col-md-12"},F={key:1},H={key:2,class:"row"},V=(0,t._)("div",{class:"col-md-4"},[(0,t._)("strong",null,"Please Read"),(0,t._)("p",{class:"text-instructions"},' The server has found potential duplications. Please review the following Organisations. If you would like to create the organisation, please scroll to the bottom of the page and hit "Submit Organisation". If the organisation you are looking for is already created. Click on the name and you will be taken to the Organisation\'s Information page. '),(0,t._)("strong",null,"Alternatively"),(0,t._)("p",{class:"text-instructions"}," You can also change the information above and resubmit. ")],-1),Y={class:"col-md-8"},j={key:3,class:"row submit-row"},J={class:"col-md-12"};var z=o(2301),K=o(3766),Q=o(2587),X=o(4250),ee=o(3058),ae=o(8416);const oe=o(9669),te={name:"NewOrganisationModal",setup:()=>({v$:(0,K.ZP)()}),components:{ListOrganisations:z.Z},props:{},mixins:[ee.Z,ae.Z],data:()=>({duplicateOrganisations:[],organisationNameModel:"",organisationWebsiteModel:"",organisationEmailModel:""}),computed:{...(0,X.Se)({rootUrl:"getRootUrl"})},watch:{organisationNameModel:function(){this.duplicateOrganisations=[]},organisationWebsiteModel:function(){this.duplicateOrganisations=[]},organisationEmailModel:function(){this.duplicateOrganisations=[]}},methods:{addOrganisation:function(){this.v$.$touch(),this.v$.$invalid?this.showValidationErrorModal():oe.post(`${this.rootUrl}organisation_duplicates/`,this.dataToSend()).then((e=>{0==e.data.length&&this.uploadOrganisationData(),this.duplicateOrganisations=e.data})).catch((e=>{this.showErrorModal(e,"organisation","")}))},dataToSend:function(){const e=new FormData;return e.set("organisation_name",this.organisationNameModel),e.set("organisation_website",this.organisationWebsiteModel),e.set("organisation_email",this.organisationEmailModel),e},uploadOrganisationData:function(){oe.post(`${this.rootUrl}new_organisation/save/`,this.dataToSend()).then((e=>{const a=e.data[0];this.$emit("created_new_organisation",{value:a.pk,organisation_email:a.fields.organisation_email,organisation_name:a.fields.organisation_name,organisation_profile_picture:a.fields.organisation_profile_picture,organisation_website:a.fields.organisation_website})})).catch((e=>{}))}},validations:{organisationNameModel:{required:Q.C1,maxLength:(0,Q.BS)(255)},organisationWebsiteModel:{required:Q.C1,url:Q.HQ},organisationEmailModel:{required:Q.C1,email:Q.Do}}};var ie=o(3744);const ne=(0,ie.Z)(te,[["render",function(e,a,o,i,n,s){const l=(0,t.up)("list-organisations");return(0,t.wg)(),(0,t.iD)("div",_,[(0,t._)("div",v,[(0,t._)("div",M,[k,(0,t._)("div",w,[(0,t.kq)(" FIELDS SECTION "),(0,t._)("div",y,[D,(0,t._)("div",S,[(0,t.kq)(" ORGANISATION NAME "),(0,t._)("div",b,[(0,t._)("label",O,[I,!i.v$.organisationNameModel.required&&i.v$.organisationNameModel.$dirty?((0,t.wg)(),(0,t.iD)("span",E," Please suppy a title. ")):(0,t.kq)("v-if",!0)]),(0,t.wy)((0,t._)("input",{id:"id_organisation_name",name:"organisation_name",type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=e=>n.organisationNameModel=e)},null,512),[[f.vModelText,n.organisationNameModel]])]),Z,(0,t._)("div",U,[(0,t.kq)(" ORGANISATION WEBSITE "),(0,t._)("div",T,[(0,t._)("label",$,[q,!i.v$.organisationWebsiteModel.required&&i.v$.organisationWebsiteModel.$dirty?((0,t.wg)(),(0,t.iD)("span",N," Please supply ")):(0,t.kq)("v-if",!0),!i.v$.organisationWebsiteModel.url&&i.v$.organisationWebsiteModel.$dirty?((0,t.wg)(),(0,t.iD)("span",x," Please format at URL ")):(0,t.kq)("v-if",!0)]),(0,t.wy)((0,t._)("input",{id:"id_organisation_website",name:"organisation_website",type:"url",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=e=>n.organisationWebsiteModel=e)},null,512),[[f.vModelText,n.organisationWebsiteModel]])]),(0,t.kq)(" ORGANISATION EMAIL "),(0,t._)("div",C,[(0,t._)("label",L,[P,!i.v$.organisationEmailModel.required&&i.v$.organisationEmailModel.$dirty?((0,t.wg)(),(0,t.iD)("span",A," Please supply ")):(0,t.kq)("v-if",!0),!i.v$.organisationEmailModel.email&&i.v$.organisationEmailModel.$dirty?((0,t.wg)(),(0,t.iD)("span",B," Please format as Email ")):(0,t.kq)("v-if",!0)]),(0,t.wy)((0,t._)("input",{id:"id_organisation_email",name:"organisation_email",type:"email",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=e=>n.organisationEmailModel=e)},null,512),[[f.vModelText,n.organisationEmailModel]])])])])]),R,(0,t.kq)(" SUBMIT ORGANISATION BUTTON "),0==n.duplicateOrganisations.length?((0,t.wg)(),(0,t.iD)("div",W,[(0,t._)("div",G,[(0,t._)("button",{class:"btn btn-primary save-changes",onClick:a[3]||(a[3]=(...e)=>s.addOrganisation&&s.addOrganisation(...e))}," Add Organisation ")])])):(0,t.kq)("v-if",!0),n.duplicateOrganisations.length>0?((0,t.wg)(),(0,t.iD)("h2",F," Potential Duplication ")):(0,t.kq)("v-if",!0),n.duplicateOrganisations.length>0?((0,t.wg)(),(0,t.iD)("div",H,[(0,t.kq)(" PLEASE READ "),V,(0,t.kq)(" DUPLICATE ORGANISATION LIST "),(0,t._)("div",Y,[(0,t.Wm)(l,{"organisation-results":n.duplicateOrganisations,"root-url":e.rootUrl},null,8,["organisation-results","root-url"])])])):(0,t.kq)("v-if",!0),(0,t.kq)(" STILL SUBMIT ORGANISATION "),n.duplicateOrganisations.length>0?((0,t.wg)(),(0,t.iD)("div",j,[(0,t._)("div",J,[(0,t._)("button",{class:"btn btn-primary save-changes",onClick:a[4]||(a[4]=(...e)=>s.uploadOrganisationData&&s.uploadOrganisationData(...e))}," Submit Organisation ")])])):(0,t.kq)("v-if",!0)])])])])}]]);var se=o(9113);const le=o(9669),re={name:"GetStakeholders",setup:()=>({v$:(0,K.ZP)()}),components:{axios:le,NewOrganisationModal:ne,NSelect:p.Z},mixins:[se.Z],props:{isDirty:{type:Boolean,default:!1}},data:()=>({searchTimeout:"",stakeholderFixList:[],stakeholderModel:""}),validations:{stakeholderModel:{required:Q.C1}},computed:{...(0,X.Se)({rootUrl:"getRootUrl"})},methods:{createdNewOrganisation:function(e){this.stakeholderModel=e,document.getElementById("newOrganisationModalCloseButton").click()},fetchOptions:function(e,a){this.searchTrigger({return_function:this.getOrganisationData,searchTimeout:this.searchTimeout,search:e,loading:a})},getOrganisationData:function(e,a){const o=new FormData;o.set("search",e),le.post(`${this.rootUrl}search/organisation/data/`,o).then((e=>{var a=e.data;this.stakeholderFixList=a.map((e=>({value:e.pk,label:e.fields.organisation_name})))})).catch((function(e){document.getElementById("errorModalContent").innerHTML=`<strong>Search Organisation Issue:</strong><br/>${e}`,new bootstrap.Modal(document.getElementById("errorModal"),{keyboard:!1}).show(),document.getElementById("loader").style.display="none"}))},openNewOrganisationModal:function(){new h.u_(document.getElementById("newOrganisationModal")).show()}},watch:{stakeholderModel:function(){this.$emit("update_stakeholder_model",this.stakeholderModel)}},mounted(){setTimeout((()=>{this.getOrganisationData("","")}),200)}},de=(0,ie.Z)(re,[["render",function(e,a,o,h,p,f){const _=(0,t.up)("n-select"),v=(0,t.up)("new-organisation-modal");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",n,[s,l,(0,t._)("p",r,[d,(0,t._)("a",{href:"javascript:void(0)",onClick:a[0]||(a[0]=(...e)=>f.openNewOrganisationModal&&f.openNewOrganisationModal(...e))}," click here to create it. ")])]),(0,t._)("div",c,[(0,t._)("div",u,[(0,t._)("label",null,[g,!h.v$.stakeholderModel.required&&o.isDirty?((0,t.wg)(),(0,t.iD)("span",m," Please search for a Stakeholder.")):(0,t.kq)("v-if",!0)]),(0,t.Wm)(_,{options:p.stakeholderFixList,filterable:"",placeholder:"Search Stakeholders",onSearch:f.fetchOptions,value:p.stakeholderModel,"onUpdate:value":a[1]||(a[1]=e=>p.stakeholderModel=e),label:"organisation_name",class:"get-stakeholders"},null,8,["options","onSearch","value"])])]),(0,t.kq)(" MODAL "),(0,t.Wm)(v,{onCreated_new_organisation:a[2]||(a[2]=e=>f.createdNewOrganisation(e))})])}]])},2301:(e,a,o)=>{o.d(a,{Z:()=>k});var t=o(6252),i=o(3577);const n={class:"organisation-details"},s=["src"],l=["src"],r={class:"organisation-name"},d=["href"],c={class:"organisation-link"},u=(0,t.Uk)(" Website: "),g=["href"],m={class:"organisation-email"},h=(0,t.Uk)(" Email: "),p=["href"];var f=o(4250),_=o(6542),v=o(5808);const M={name:"ListOrganisations",components:{Icon:_.JO},props:{organisationResults:{type:Array,default:()=>[]}},computed:{...(0,f.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[v.Z],methods:{}},k=(0,o(3744).Z)(M,[["render",function(e,a,o,f,_,v){const M=(0,t.up)("Icon");return(0,t.wg)(),(0,t.iD)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.organisationResults,(a=>((0,t.wg)(),(0,t.iD)("div",{key:a.id,class:"row"},[(0,t._)("div",n,[""==a.fields.organisation_profile_picture?((0,t.wg)(),(0,t.iD)("img",{key:0,src:`${e.staticUrl}/NearBeach/images/placeholder/product_tour.svg`,alt:"Stakeholder Logo",class:"organisation-image"},null,8,s)):((0,t.wg)(),(0,t.iD)("img",{key:1,src:a.fields.organisation_profile_picture,alt:"Stakeholder Logo",class:"organisation-image"},null,8,l)),(0,t._)("div",r,[(0,t._)("a",{href:`${e.rootUrl}organisation_information/${a.pk}/`},(0,i.toDisplayString)(a.fields.organisation_name),9,d)]),(0,t._)("div",c,[(0,t.Wm)(M,{icon:e.icons.linkOut},null,8,["icon"]),u,(0,t._)("a",{href:a.fields.organisation_website,target:"_blank",rel:"noopener noreferrer"},(0,i.toDisplayString)(a.fields.organisation_website),9,g)]),(0,t._)("div",m,[(0,t.Wm)(M,{icon:e.icons.mailIcon},null,8,["icon"]),h,(0,t._)("a",{href:`mailto:${a.fields.organisation_email}`},(0,i.toDisplayString)(a.fields.organisation_email),9,p)])])])))),128))])}]])},2843:(e,a,o)=>{o.d(a,{Z:()=>w});var t=o(6252),i=o(3577);const n={class:"row"},s=(0,t._)("div",{class:"col-md-4"},[(0,t._)("h2",null,"Stakeholder")],-1),l={class:"col-md-8 organisation-details"},r=["src"],d={class:"organisation-name"},c=["href"],u={class:"organisation-link"},g=(0,t.Uk)(" Website: "),m=["href"],h={class:"organisation-email"},p=(0,t.Uk)(" Email: "),f=["href"];var _=o(6542),v=o(5808),M=o(4250);const k={name:"StakeholderInformation",components:{Icon:_.JO},props:{defaultStakeholderImage:{type:String,default:""},organisationResults:{type:Array,default:()=>[]}},data(){return{stakeholderModel:this.organisationResults[0].fields}},mixins:[v.Z],computed:{...(0,M.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"}),getStakeholderImage:function(){return""===this.stakeholderModel.organisation_profile_picture?this.defaultStakeholderImage:this.stakeholderModel.organisation_profile_picture}}},w=(0,o(3744).Z)(k,[["render",function(e,a,o,_,v,M){const k=(0,t.up)("Icon");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.kq)(" Description "),s,(0,t._)("div",l,[(0,t._)("img",{src:M.getStakeholderImage,alt:"Stakeholder Logo",class:"organisation-image"},null,8,r),(0,t._)("div",d,[(0,t._)("a",{href:`${e.rootUrl}organisation_information/${o.organisationResults[0].pk}/`},(0,i.toDisplayString)(v.stakeholderModel.organisation_name),9,c)]),(0,t._)("div",u,[(0,t.Wm)(k,{icon:e.icons.linkOut},null,8,["icon"]),g,(0,t._)("a",{href:v.stakeholderModel.organisation_website,target:"_blank",rel:"noopener noreferrer"},(0,i.toDisplayString)(v.stakeholderModel.organisation_website),9,m)]),(0,t._)("div",h,[(0,t.Wm)(k,{icon:e.icons.mailIcon},null,8,["icon"]),p,(0,t._)("a",{href:`mailto:${v.stakeholderModel.organisation_email}`},(0,i.toDisplayString)(v.stakeholderModel.organisation_email),9,f)])])])}]])},1401:(e,a,o)=>{o.d(a,{Z:()=>f});var t=o(6252),i=o(3577);const n={class:"row"},s={class:"col-md-4"},l=(0,t._)("h2",null,"Group Permissions",-1),r={class:"text-instructions"},d=(0,t._)("p",{class:"text-instructions"}," If you do not add one of your own group(s), you will only get readonly access. ",-1),c={class:"col-md-8"},u=(0,t.Uk)("Group List "),g={key:0,class:"error"};var m=o(3766),h=o(2587);const p={name:"GroupPermissions",setup:()=>({v$:(0,m.ZP)()}),components:{NSelect:o(967).Z},props:{destination:{type:String,default:""},groupResults:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!0},userGroupResults:{type:Array,default:()=>[]}},watch:{groupModel:function(){this.$emit("update_group_model",this.groupModel)}},data:()=>({groupFixResults:[],groupModel:[]}),validations:{groupModel:{required:h.C1}},mounted(){this.groupFixResults=this.groupResults.map((e=>({value:e.pk,label:e.fields.group_name}))),this.groupModel=this.userGroupResults.map((e=>e.group_id))}},f=(0,o(3744).Z)(p,[["render",function(e,a,o,m,h,p){const f=(0,t.up)("n-select");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t._)("div",s,[l,(0,t._)("p",r," Add or remove groups from this "+(0,i.toDisplayString)(o.destination)+". Adding a group will allow users from that group to access this "+(0,i.toDisplayString)(o.destination)+". ",1),d]),(0,t._)("div",c,[(0,t._)("label",null,[u,!m.v$.groupModel.required&&o.isDirty?((0,t.wg)(),(0,t.iD)("span",g," Please select at least one group.")):(0,t.kq)("v-if",!0)]),(0,t.Wm)(f,{options:h.groupFixResults,label:"group",value:h.groupModel,"onUpdate:value":a[0]||(a[0]=e=>h.groupModel=e),multiple:""},null,8,["options","value"])])])}]])},3058:(e,a,o)=>{o.d(a,{Z:()=>i});var t=o(5169);const i={methods:{showErrorModal:function(e,a,o){new t.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new t.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new t.u_(document.getElementById("errorModal")).show()}}}},5808:(e,a,o)=>{o.d(a,{Z:()=>E});var t=o(3985),i=o(5555),n=o(1826),s=o(6443),l=o(1327),r=o(8521),d=o(1056),c=o(4324),u=o(9672),g=o(9867),m=o(1239),h=o(5004),p=o(1321),f=o(1216),_=o(5550),v=o(7702),M=o(7903),k=o(2606),w=o(3843),y=o(2393),D=o(3360),S=o(9714),b=o(1323),O=o(2610),I=o(5968);const E={data:()=>({icons:{arrowUp:t.Z,bugIcon:i.Z,bxBriefcase:n.Z,cardChecklist:s.Z,clipboardIcon:l.Z,documentPdf:r.Z,documentText:d.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:g.Z,infoCircle:m.Z,linkIcon:h.Z,linkIcon2:p.Z,linkOut:f.Z,mailIcon:_.Z,microsoftExcel:v.Z,microsoftPowerpoint:M.Z,microsoftWord:k.Z,noteAdd:w.Z,objectStorage:y.Z,passwordIcon:D.Z,trashCan:S.Z,userIcon:b.Z,usersIcon:O.Z,xCircle:I.Z}})}},8416:(e,a,o)=>{o.d(a,{Z:()=>i});var t=o(5169);const i={methods:{closeLoadingModal:function(){var e=new t.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{e.hide()}),1e3)},showLoadingModal:function(e){new t.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${e} details`}}}},9113:(e,a,o)=>{o.d(a,{Z:()=>t});const t={methods:{searchTrigger:function(e){""!=e.searchTimeout&&clearTimeout(e.searchTimeout),void 0===e.search?this.searchUndefined(e):this.searchDefined(e)},searchDefined:function(e){e.search.length>=3&&(e.searchTimeout=setTimeout(e.return_function,500,e.search,e.loading))},searchUndefined:function(e){e.searchTimeout=setTimeout(e.return_function,500)}}}}}]);